(()=>{"use strict";var e={211:(e,t,n)=>{var a=n(2299),r=n(6665),l=n(5479),i=n(7114),s=n(5086),o=n(3929),d=n(6283),u=n(6773),c=n(8180),h=n(3668),f=n(530),g=n(1087),m=n(3947);const b=(0,n(8336).createClient)("https://elywhketsxozigeycjkj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVseXdoa2V0c3hvemlnZXljamtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0OTU5MjEsImV4cCI6MjA1NjA3MTkyMX0.oIfd4wPU2UocrmRXIWeCHsofz2rFekWTD5ISMiRAQ70");var p=n(484),x=n(397);const y=h.default.create({header:{height:50,flexDirection:"row",alignItems:"center",backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#ccc",paddingHorizontal:10},sideContainer:{flex:1,alignItems:"center"},centerContainer:{flex:2,alignItems:"center"},logo:{width:80,height:40,resizeMode:"contain"},logoBetrieb:{width:100,height:40,resizeMode:"contain"},title:{fontSize:18,fontWeight:"bold"}}),j=({title:e})=>(0,x.jsxs)(o.default,{style:y.header,children:[(0,x.jsx)(o.default,{style:y.sideContainer,children:(0,x.jsx)(p.default,{source:n(4082),style:y.logo})}),(0,x.jsx)(o.default,{style:y.centerContainer,children:e&&(0,x.jsx)(d.default,{style:y.title,children:e})}),(0,x.jsx)(o.default,{style:y.sideContainer,children:(0,x.jsx)(p.default,{source:n(7635),style:y.logoBetrieb})})]});function k(){const e=(0,m.useNavigation)(),[t,n]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[h,p]=(0,r.useState)(!0);(0,r.useEffect)((()=>{(async()=>{try{const t=await g.default.getItem("lastLogin"),{data:{session:n}}=await b.auth.getSession();if(t&&n){const n=new Date(parseInt(t)),a=new Date;if((a.getTime()-n.getTime())/36e5<24)return void e.replace("Home")}}catch(t){console.error("Fehler beim Pr\xfcfen der gespeicherten Anmeldung:",t)}p(!1)})()}),[]);return h?(0,x.jsxs)(o.default,{style:C.loadingContainer,children:[(0,x.jsx)(f.default,{size:"large",color:"#007AFF"}),(0,x.jsx)(d.default,{children:"Pr\xfcfe Login..."})]}):(0,x.jsxs)(o.default,{style:C.container,children:[(0,x.jsx)(j,{}),(0,x.jsx)(d.default,{style:C.title,children:"Login"}),i?(0,x.jsx)(d.default,{style:C.error,children:i}):null,(0,x.jsx)(u.default,{style:C.input,placeholder:"E-Mail",autoCapitalize:"none",keyboardType:"email-address",value:t,onChangeText:n}),(0,x.jsx)(u.default,{style:C.input,placeholder:"Passwort",secureTextEntry:!0,value:a,onChangeText:l}),(0,x.jsx)(c.default,{title:"Einloggen",onPress:async()=>{s(""),p(!0);try{const{data:n,error:r}=await b.auth.signInWithPassword({email:t,password:a});r||!n.user?(s(r?r.message:"Login fehlgeschlagen"),p(!1)):(await g.default.setItem("lastLogin",Date.now().toString()),e.replace("Home"))}catch(n){s(n.message),p(!1)}},disabled:h})]})}const C=h.default.create({container:{flex:1,padding:20,justifyContent:"center"},title:{fontSize:26,marginBottom:20,textAlign:"center"},error:{color:"red",marginBottom:10,textAlign:"center"},input:{borderWidth:1,borderColor:"#ccc",marginBottom:12,paddingVertical:8,paddingHorizontal:10,borderRadius:6},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"}});var S=n(2772),z=n(5648),w=n(4754);function v(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function _(e,t){return t.findIndex((t=>v(t.date,e)))}function T(e,t,n,a){const r=n.filter((t=>t.zimmer_id===e.id)).filter((e=>{const n=new Date(e.check_in),a=new Date(e.check_out);return v(t,n)||v(t,a)||t>n&&t<a}));return 0===r.length?(0,x.jsx)(o.default,{style:[B.statusBar,{backgroundColor:"#d3d3d3"}],children:(0,x.jsx)(d.default,{style:B.statusBarText,children:"Frei"})}):(0,x.jsx)(o.default,{style:B.statusBarsContainer,children:r.map((e=>{const n=new Date(e.check_in),r=new Date(e.check_out),l=a.find((t=>t.id===e.gast_id)),i=l?l.nachname:"Unbekannt";let s="";e.verpflegung&&(s="Fr\xfchst\xfcck"===e.verpflegung?"B&B":"Halbpension"===e.verpflegung?"HP":e.verpflegung);let u="",c="";return v(n,r)?(u=`Check-in/Check-out: ${i} (${e.anzahl_personen} P.) [${s}]`,c="#ADD8E6"):v(t,n)?(u=`Check-in: ${i} (${e.anzahl_personen} P.) [${s}]`,c="#ADD8E6"):v(t,r)?(u=`Check-out: ${i} (${e.anzahl_personen} P.) [${s}]`,c="#FFDAB9"):(u=`belegt: ${i} (${e.anzahl_personen} P.) [${s}]`,c="#90EE90"),(0,x.jsx)(o.default,{style:[B.statusBar,{backgroundColor:c}],children:(0,x.jsx)(d.default,{style:B.statusBarText,children:u})},e.id)}))})}const B=h.default.create({container:{flex:1,padding:16,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:16},dateSelector:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},dateText:{fontSize:18,fontWeight:"bold"},navigationButtons:{flexDirection:"row",justifyContent:"space-around",marginBottom:16},roomList:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"},roomCard:{width:"48%",backgroundColor:"#f9f9f9",padding:8,marginBottom:16,borderRadius:4,borderWidth:1,borderColor:"#ddd"},roomTitle:{fontSize:16,fontWeight:"bold",marginBottom:4},statusText:{fontSize:14},statusBar:{padding:4,borderRadius:4,marginVertical:2},statusBarText:{fontSize:14,color:"#000"},statusBarsContainer:{flexDirection:"column"},guestName:{color:"blue",textDecorationLine:"underline",marginVertical:2},summary:{marginVertical:16},summaryBorder:{borderTopWidth:1,borderColor:"#ccc",paddingVertical:8},summaryText:{fontSize:16},customModalContainer:{margin:0,justifyContent:"center"},customModalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center",padding:16},customModalContent:{backgroundColor:"#fff",padding:16,borderRadius:8,width:"85%"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:12,textAlign:"center"},navFooter:{flexDirection:"row",justifyContent:"space-around",marginTop:16}}),F=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[s,u]=(0,r.useState)([]),[h,f]=(0,r.useState)(new Date),[g,p]=(0,r.useState)(""),[y,k]=(0,r.useState)(!1),[C,F]=(0,r.useState)(null),P=(0,r.useRef)(null),D=(0,m.useNavigation)(),I=async()=>{try{const{data:e}=await b.from("zimmer").select("*");e&&a(e);const{data:t}=await b.from("buchungen").select("*").is("deleted_at",null);t&&i(t);const{data:n}=await b.from("gaeste").select("*");n&&u(n)}catch(e){console.error("Fehler beim Laden der Daten:",e)}};(0,r.useEffect)((()=>{t(function(){const e=[],t=new Date;t.setDate(t.getDate()-60);const n=new Date;n.setMonth(n.getMonth()+18);let a=new Date(t);for(;a<=n;){const t=a.getDate().toString().padStart(2,"0"),n=a.toLocaleDateString("de-DE",{month:"2-digit",year:"numeric"}).replace(".","/");e.push({date:new Date(a),dayNumber:t,monthYear:n}),a.setDate(a.getDate()+1)}return e}()),I();const e=setInterval(I,12e4);return()=>clearInterval(e)}),[]),(0,r.useEffect)((()=>{if(e.length>0&&P.current){const t=_(new Date,e);if(-1!==t){const e=80+60*t;P.current?.scrollTo({x:e,animated:!1})}}}),[e]);const E=e=>{const t=new Date(h);t.setDate(t.getDate()+e),f(t)},O=e=>{F(e),k(!0)},N=()=>{D.navigate("Calendarscreen")},A=()=>{D.navigate("AnzahlungenScreen")},R=()=>{D.navigate("EinstellungenScreen")};return(0,x.jsxs)(S.default,{style:B.container,children:[(0,x.jsx)(j,{}),(0,x.jsx)(d.default,{style:B.title,children:"Tages\xfcbersicht"}),(0,x.jsxs)(o.default,{style:B.dateSelector,children:[(0,x.jsx)(c.default,{title:"\u2039",onPress:()=>E(-1)}),(0,x.jsx)(d.default,{style:B.dateText,children:(L=h,`${L.getDate().toString().padStart(2,"0")}.${(L.getMonth()+1).toString().padStart(2,"0")}.${L.getFullYear()}`)}),(0,x.jsx)(c.default,{title:"\u203a",onPress:()=>E(1)})]}),(0,x.jsxs)(o.default,{style:B.navigationButtons,children:[(0,x.jsx)(c.default,{title:"Zum Kalender",onPress:N}),(0,x.jsx)(c.default,{title:"Anzahlungen",onPress:A}),(0,x.jsx)(c.default,{title:"Einstellungen",onPress:R})]}),(0,x.jsx)(o.default,{style:B.roomList,children:n.map((e=>(0,x.jsxs)(o.default,{style:B.roomCard,children:[(0,x.jsxs)(d.default,{style:B.roomTitle,children:["Zimmer ",e.nummer]}),T(e,h,l,s)]},e.id)))}),(0,x.jsxs)(o.default,{style:B.summary,children:[(0,x.jsx)(o.default,{style:B.summaryBorder,children:(0,x.jsxs)(d.default,{style:B.summaryText,children:["Fr\xfchst\xfcck (B&B):"," ",l.filter((e=>("Fr\xfchst\xfcck"===e.verpflegung||"Halbpension"===e.verpflegung)&&new Date(e.check_in)<=h&&new Date(e.check_out)>=h)).reduce(((e,t)=>e+t.anzahl_personen),0)," ","P."]})}),(0,x.jsx)(o.default,{style:B.summaryBorder,children:(0,x.jsxs)(d.default,{style:B.summaryText,children:["Halbpension (HP):"," ",l.filter((e=>"Halbpension"===e.verpflegung&&new Date(e.check_in)<=h&&new Date(e.check_out)>=h)).reduce(((e,t)=>e+t.anzahl_personen),0)," ","P."]})}),(0,x.jsxs)(o.default,{style:B.summaryBorder,children:[(0,x.jsxs)(d.default,{style:B.summaryText,children:["Check-Ins:"," ",l.filter((e=>v(new Date(e.check_in),h))).reduce(((e,t)=>e+t.anzahl_personen),0)," ","P."]}),l.filter((e=>v(new Date(e.check_in),h))).map(((e,t)=>{const a=s.find((t=>t.id===e.gast_id)),r=n.find((t=>t.id===e.zimmer_id))?.nummer||"";return(0,x.jsx)(z.default,{onPress:()=>O(e),children:(0,x.jsxs)(d.default,{style:B.guestName,children:["Zimmer ",r," - ",a?`${a.vorname} ${a.nachname}`:"Unbekannt"]})},`in-${t}`)}))]}),(0,x.jsxs)(o.default,{style:B.summaryBorder,children:[(0,x.jsxs)(d.default,{style:B.summaryText,children:["Check-Outs:"," ",l.filter((e=>v(new Date(e.check_out),h))).reduce(((e,t)=>e+t.anzahl_personen),0)," ","P."]}),l.filter((e=>v(new Date(e.check_out),h))).map(((e,t)=>{const a=s.find((t=>t.id===e.gast_id)),r=n.find((t=>t.id===e.zimmer_id))?.nummer||"";return(0,x.jsx)(z.default,{onPress:()=>O(e),children:(0,x.jsxs)(d.default,{style:B.guestName,children:["Zimmer ",r," - ",a?`${a.vorname} ${a.nachname}`:"Unbekannt"]})},`out-${t}`)}))]}),(0,x.jsxs)(o.default,{style:B.summaryBorder,children:[(0,x.jsx)(d.default,{style:B.summaryText,children:"Anwesende G\xe4ste:"}),l.filter((e=>h>new Date(e.check_in)&&h<new Date(e.check_out))).map(((e,t)=>{const a=s.find((t=>t.id===e.gast_id)),r=n.find((t=>t.id===e.zimmer_id))?.nummer||"";return(0,x.jsx)(z.default,{onPress:()=>O(e),children:(0,x.jsxs)(d.default,{style:B.guestName,children:["Zimmer ",r," - ",a?`${a.vorname} ${a.nachname}`:"Unbekannt"]})},`active-${t}`)}))]})]}),C&&(0,x.jsx)(w.default,{isVisible:y,onBackdropPress:()=>k(!1),useNativeDriver:!1,style:B.customModalContainer,children:(0,x.jsx)(o.default,{style:B.customModalOverlay,children:(0,x.jsxs)(o.default,{style:B.customModalContent,children:[(0,x.jsx)(d.default,{style:B.modalTitle,children:"Buchungsdetails"}),(0,x.jsxs)(d.default,{children:["Zimmer:"," ",n.find((e=>e.id===C.zimmer_id))?.nummer]}),(0,x.jsxs)(d.default,{children:["Check-In: ",C.check_in]}),(0,x.jsxs)(d.default,{children:["Check-Out: ",C.check_out]}),(0,x.jsxs)(d.default,{children:["Gast:"," ",(()=>{const e=s.find((e=>e.id===C.gast_id));return e?`${e.vorname} ${e.nachname}`:"Unbekannt"})()]}),(0,x.jsxs)(d.default,{children:["Personen: ",C.anzahl_personen]}),(0,x.jsxs)(d.default,{children:["Status: ",C.status]}),(0,x.jsxs)(d.default,{children:["Verpflegung: ",C.verpflegung||"-"]}),(0,x.jsxs)(d.default,{children:["Anzahlung: ",C.anzahlung]}),(0,x.jsxs)(d.default,{children:["Preis pro Person: ",C.preis_pro_person]}),(0,x.jsxs)(d.default,{children:["Zusatz Preis: ",C.zusatz_preis]}),(0,x.jsxs)(d.default,{children:["Tel.: / email: ",C.tel_email]}),(0,x.jsxs)(d.default,{children:["Notiz: ",C.notiz||"-"]}),(0,x.jsx)(c.default,{title:"Schlie\xdfen",onPress:()=>k(!1)})]})})}),(0,x.jsxs)(o.default,{style:B.navFooter,children:[(0,x.jsx)(c.default,{title:"Zum Kalender",onPress:N}),(0,x.jsx)(c.default,{title:"Anzahlungen",onPress:A}),(0,x.jsx)(c.default,{title:"Einstellungen",onPress:R})]})]});var L};var P=n(1690),D=n(6725),I=n(2365),E=n(1950);function O(e,t){window.alert(`${e}: ${t}`)}const N=(0,r.memo)((({options:e,selectedValue:t,onChange:n})=>(0,x.jsx)(o.default,{style:W.radioGroup,children:e.map((e=>{const a=e.value===t;return(0,x.jsx)(E.default,{onPress:()=>n(e.value),children:(0,x.jsx)(o.default,{style:[W.radioOption,a&&W.radioOptionSelected],children:(0,x.jsx)(d.default,{style:[W.radioLabel,a&&W.radioLabelSelected],children:e.label})})},e.value)}))}))),A=[{label:"Belegt",value:"belegt"},{label:"Anzahlung",value:"anzahlung"},{label:"Anz. bez",value:"anzahlung_bezahlt"}],R=[{label:"Fr\xfchst\xfcck",value:"Fr\xfchst\xfcck"},{label:"Halbpension",value:"Halbpension"}],L=[{label:"Nein",value:"nein"},{label:"Ja",value:"ja"}],W=h.default.create({modalContainer:{margin:0,justifyContent:"flex-end"},scrollContainer:{flexGrow:1,justifyContent:"center"},modalOverlay:{flexGrow:1,backgroundColor:"rgba(0,0,0,0.5)",padding:16,justifyContent:"center"},modalContent:{backgroundColor:"#fff",borderRadius:8,padding:16,width:"85%",alignSelf:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:12,textAlign:"center"},label:{marginTop:8,fontWeight:"600",marginBottom:4,fontSize:16},input:{height:40,fontSize:16,paddingVertical:8,paddingHorizontal:10,borderWidth:1,borderColor:"#ccc",borderRadius:4,color:"black",marginBottom:12},radioGroup:{flexDirection:"row",marginBottom:12},radioOption:{paddingVertical:4,paddingHorizontal:8,borderWidth:1,borderColor:"#ccc",borderRadius:4,marginRight:8},radioOptionSelected:{backgroundColor:"#007AFF",borderColor:"#007AFF"},radioLabel:{fontSize:16,color:"black"},radioLabelSelected:{color:"#fff"},buttonRow:{flexDirection:"row",justifyContent:"space-around",marginTop:12}}),M=(0,r.memo)((({isVisible:e,checkIn:t,checkOut:n,onClose:a,onSubmit:l,onRefresh:i,initialGuestName:s="",initialPersonCount:h=0,selectedzimmerId:f})=>{const[g,m]=(0,r.useState)(s),[p,y]=(0,r.useState)(h.toString()),[j,k]=(0,r.useState)("belegt"),[C,z]=(0,r.useState)("0"),[v,_]=(0,r.useState)("Fr\xfchst\xfcck"),[T,B]=(0,r.useState)(""),[F,P]=(0,r.useState)("nein"),[D,E]=(0,r.useState)(""),[M,$]=(0,r.useState)(""),[V,H]=(0,r.useState)(""),[Y,K]=(0,r.useState)(!1);(0,r.useEffect)((()=>{e&&(m(s),y(h.toString()),k("belegt"),z("0"),_("Fr\xfchst\xfcck"),B(""),P("nein"),E(""),$(""),H(""),K(!1))}),[e,s,h]),(0,r.useEffect)((()=>{""!==C.trim()&&"0"!==C&&k("anzahlung")}),[C]);const G=g.trim().split(" ").length>=2&&!isNaN(parseInt(p))&&parseInt(p)>0,Z=(0,r.useCallback)((async(e,t,n)=>{const{data:a,error:r}=await b.from("buchungen").select("id").eq("zimmer_id",e).is("deleted_at",null).filter("check_in","lt",n).filter("check_out","gt",t);return r?(O("Fehler","Fehler bei der Verf\xfcgbarkeitspr\xfcfung."),!1):a&&0===a.length}),[]),q=(0,r.useCallback)((async()=>{if(Y)return;if(!f)return void O("Fehler","Kein Zimmer ausgew\xe4hlt.");const e=parseInt(p);if(isNaN(e)||e<=0)O("Fehler","Bitte eine g\xfcltige Anzahl an Personen eingeben.");else{K(!0);try{const r=parseFloat(C),l=""===T.trim()?null:parseFloat(T),s=D.trim();console.log("Submitting booking with data:",{guestName:g,personCount:e,status:j,anzahlung:isNaN(r)?0:r,verpflegung:v,preisProPerson:l,hund:"ja"===F,zusatzPreis:s,notiz:V,tel_email:M});const o=g.trim().split(" ");if(o.length<2)return O("Fehler","Bitte Vor- und Nachname eingeben."),void K(!1);let d=null;const{data:u,error:c}=await b.from("gaeste").select("id").eq("vorname",o[0]).eq("nachname",o[1]);if(c&&console.log("Fehler bei der Gast-Suche",c),u&&u.length>0)d=u[0].id;else{const{data:e}=await b.from("gaeste").insert([{vorname:o[0],nachname:o[1]}]).select("*").single();if(!e)return O("Fehler","Gast konnte nicht erstellt werden."),void K(!1);d=e.id}if(!await Z(f,t,n))return O("Fehler","Das Zimmer ist im angegebenen Zeitraum bereits vergeben."),void K(!1);const{error:h}=await b.from("buchungen").insert([{zimmer_id:f,gast_id:d,check_in:t,check_out:n,anzahl_personen:e,preis_pro_person:l??0,anzahlung:isNaN(r)?0:r,status:j,verpflegung:v,hund:"ja"===F,zusatz_preis:s,tel_email:M,notiz:V}]);h?O("Fehler",h.message):(O("Erfolg","Buchung erstellt!"),a(),i&&await i())}catch(r){console.error("Fehler beim Erstellen der Buchung:",r),O("Fehler",r.message||"Unbekannter Fehler beim Erstellen der Buchung.")}K(!1)}}),[Y,p,C,T,D,g,j,v,F,M,V,t,n,f,a,i,Z]),U=(0,x.jsx)(S.default,{contentContainerStyle:W.scrollContainer,keyboardShouldPersistTaps:"handled",keyboardDismissMode:"on-drag",children:(0,x.jsx)(o.default,{style:W.modalOverlay,children:(0,x.jsxs)(o.default,{style:W.modalContent,children:[(0,x.jsx)(d.default,{style:W.modalTitle,children:"Neue Buchung"}),(0,x.jsxs)(d.default,{children:["Check-In: ",t]}),(0,x.jsxs)(d.default,{children:["Check-Out: ",n]}),(0,x.jsx)(d.default,{style:W.label,children:"Gastname:"}),(0,x.jsx)(u.default,{style:W.input,placeholder:"Vorname Nachname",value:g,onChangeText:m,returnKeyType:"done",onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:W.label,children:"Personenanzahl:"}),(0,x.jsx)(u.default,{style:W.input,placeholder:"z. B. 2",value:p,onChangeText:y,keyboardType:"numeric",returnKeyType:"done",onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:W.label,children:"Status:"}),(0,x.jsx)(N,{options:A,selectedValue:j,onChange:k}),(0,x.jsx)(d.default,{style:W.label,children:"Anzahlung:"}),(0,x.jsx)(u.default,{style:W.input,placeholder:"0",value:C,onChangeText:z,keyboardType:"numeric",returnKeyType:"done",onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:W.label,children:"Verpflegung:"}),(0,x.jsx)(N,{options:R,selectedValue:v,onChange:_}),(0,x.jsx)(d.default,{style:W.label,children:"Preis pro Person:"}),(0,x.jsx)(u.default,{style:W.input,placeholder:"z. B. 50",value:T,onChangeText:B,keyboardType:"numeric",returnKeyType:"done",onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:W.label,children:"Hund:"}),(0,x.jsx)(N,{options:L,selectedValue:F,onChange:P}),(0,x.jsx)(d.default,{style:W.label,children:"Zusatz Preis:"}),(0,x.jsx)(u.default,{style:W.input,placeholder:"z. B. 10",value:D,onChangeText:E,returnKeyType:"done",onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:W.label,children:"Tel.: / email:"}),(0,x.jsx)(u.default,{style:W.input,placeholder:"Telefon oder Email",value:M,onChangeText:$,returnKeyType:"done",onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:W.label,children:"Notiz:"}),(0,x.jsx)(u.default,{style:[W.input,{height:80}],placeholder:"Notiz",value:V,onChangeText:H,multiline:!0,returnKeyType:"done"}),(0,x.jsxs)(o.default,{style:W.buttonRow,children:[(0,x.jsx)(c.default,{title:"Abbrechen",onPress:a}),""!==t.trim()&&""!==n.trim()&&(0,x.jsx)(c.default,{title:"Buchung erstellen",disabled:!G||Y,onPress:q})]})]})})});return(0,x.jsx)(w.default,{isVisible:e,onBackdropPress:a,coverScreen:!0,useNativeDriver:!1,style:W.modalContainer,propagateSwipe:!0,avoidKeyboard:!0,children:U})}));function $(e,t){window.alert(`${e}: ${t}`)}const V=(0,r.memo)((({options:e,selectedValue:t,onChange:n})=>(0,x.jsx)(o.default,{style:Y.radioGroup,children:e.map((e=>{const a=e.value===t;return(0,x.jsx)(E.default,{onPress:()=>n(e.value),children:(0,x.jsx)(o.default,{style:[Y.radioOption,a&&Y.radioOptionSelected],children:(0,x.jsx)(d.default,{style:[Y.radioLabel,a&&Y.radioLabelSelected],children:e.label})})},e.value)}))}))),H={height:40,fontSize:16,paddingVertical:8,paddingHorizontal:10,borderWidth:1,borderColor:"#ccc",borderRadius:4,color:"black",marginBottom:12,width:"100%"},Y=h.default.create({modalContainer:{margin:0,justifyContent:"flex-end"},scrollContainer:{flexGrow:1,justifyContent:"center"},modalOverlay:{flexGrow:1,backgroundColor:"rgba(0,0,0,0.5)",padding:16,justifyContent:"center"},modalContent:{backgroundColor:"#fff",borderRadius:8,padding:16,width:"85%",alignSelf:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:12,textAlign:"center"},label:{marginTop:8,fontWeight:"600",marginBottom:4,fontSize:16},radioGroup:{flexDirection:"row",marginBottom:12},radioOption:{paddingVertical:4,paddingHorizontal:8,borderWidth:1,borderColor:"#ccc",borderRadius:4,marginRight:8},radioOptionSelected:{backgroundColor:"#007AFF",borderColor:"#007AFF"},radioLabel:{fontSize:16,color:"black"},radioLabelSelected:{color:"#fff"},buttonRow:{flexDirection:"row",justifyContent:"space-around",marginTop:12},modalButtons:{marginTop:12,alignItems:"center"}}),K=(0,r.memo)((({isVisible:e,booking:t,onClose:n,onUpdate:a,onDelete:l,onRefresh:i})=>{const[s,h]=(0,r.useState)(t.guestName),[f,g]=(0,r.useState)(t.personCount.toString()),[m,p]=(0,r.useState)(t.status),[y,j]=(0,r.useState)(t.anzahlung.toString()),[k,C]=(0,r.useState)(t.verpflegung||"Fr\xfchst\xfcck"),[z,v]=(0,r.useState)(null!==t.preisProPerson?t.preisProPerson.toString():""),[_,T]=(0,r.useState)(t.hund?"ja":"nein"),[B,F]=(0,r.useState)(t.zusatz_preis),[P,D]=(0,r.useState)(t.tel_email),[E,O]=(0,r.useState)(t.zimmerNumber),[N,A]=(0,r.useState)(t.checkIn),[R,L]=(0,r.useState)(t.checkOut),[W,M]=(0,r.useState)(t.notiz||""),[K,G]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h(t.guestName),g(t.personCount.toString()),p(t.status),j(t.anzahlung.toString()),C(t.verpflegung||"Fr\xfchst\xfcck"),v(null!==t.preisProPerson?t.preisProPerson.toString():""),T(t.hund?"ja":"nein"),F(t.zusatz_preis),D(t.tel_email),O(t.zimmerNumber),A(t.checkIn),L(t.checkOut),M(t.notiz||""),G(!1)}),[t]);const Z=s.trim().split(" ").length>=2&&!isNaN(parseInt(f))&&parseInt(f)>0&&""!==N.trim()&&""!==R.trim()&&""!==E.trim(),q=(0,r.useCallback)((async()=>{if(K)return;G(!0);const e=parseInt(f);if(isNaN(e)||e<=0)return $("Fehler","Bitte eine g\xfcltige Anzahl an Personen eingeben."),void G(!1);const{data:a,error:r}=await b.from("zimmer").select("id").eq("nummer",E.trim()).single();if(r||!a)return $("Fehler","Zimmernummer existiert nicht."),void G(!1);const l=parseFloat(y),s=""===z.trim()?null:parseFloat(z),{error:o}=await b.from("buchungen").update({check_in:N,check_out:R,anzahl_personen:e,preis_pro_person:s??0,anzahlung:isNaN(l)?0:l,status:m,verpflegung:k,hund:"ja"===_,zusatz_preis:B,tel_email:P,notiz:W,zimmer_id:a.id}).eq("id",t.id);o?$("Fehler",o.message):($("Erfolg","Buchung aktualisiert!"),i&&await i(),n()),G(!1)}),[K,f,y,z,E,N,R,m,k,_,B,P,W,t.id,i,n]),U=(0,r.useCallback)((async()=>{if(K)return;if(await async function(e){return Promise.resolve(window.confirm(e))}("M\xf6chtest du die Buchung wirklich l\xf6schen?")){G(!0);const{error:e}=await b.from("buchungen").update({deleted_at:(new Date).toISOString()}).eq("id",t.id);e?$("Fehler",e.message):($("Erfolg","Buchung wurde soft-deleted!"),i&&await i(),n()),G(!1)}}),[K,t.id,i,n]),J=(0,x.jsx)(S.default,{contentContainerStyle:Y.scrollContainer,keyboardShouldPersistTaps:"handled",keyboardDismissMode:"on-drag",children:(0,x.jsx)(o.default,{style:Y.modalOverlay,children:(0,x.jsxs)(o.default,{style:Y.modalContent,children:[(0,x.jsx)(d.default,{style:Y.modalTitle,children:"Buchung bearbeiten"}),(0,x.jsxs)(d.default,{children:["Aktueller Check-In: ",t.checkIn]}),(0,x.jsxs)(d.default,{children:["Aktueller Check-Out: ",t.checkOut]}),(0,x.jsx)(d.default,{style:Y.label,children:"Zimmernummer:"}),(0,x.jsx)(u.default,{style:H,placeholder:"z. B. 101",value:E,onChangeText:O,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Neuer Check-In:"}),(0,x.jsx)(u.default,{style:H,placeholder:"YYYY-MM-DD",value:N,onChangeText:A,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Neuer Check-Out:"}),(0,x.jsx)(u.default,{style:H,placeholder:"YYYY-MM-DD",value:R,onChangeText:L,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Gastname:"}),(0,x.jsx)(u.default,{style:H,placeholder:"Vorname Nachname",value:s,onChangeText:h,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Anzahl Personen:"}),(0,x.jsx)(u.default,{style:H,placeholder:"z. B. 2",value:f,onChangeText:g,keyboardType:"numeric",blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Status:"}),(0,x.jsx)(V,{options:[{label:"Belegt",value:"belegt"},{label:"Anzahlung",value:"anzahlung"},{label:"Anz. bez",value:"anzahlung_bezahlt"}],selectedValue:m,onChange:p}),(0,x.jsx)(d.default,{style:Y.label,children:"Anzahlung:"}),(0,x.jsx)(u.default,{style:H,placeholder:"0",value:y,onChangeText:j,keyboardType:"numeric",blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Verpflegung:"}),(0,x.jsx)(V,{options:[{label:"Fr\xfchst\xfcck",value:"Fr\xfchst\xfcck"},{label:"Halbpension",value:"Halbpension"}],selectedValue:k,onChange:C}),(0,x.jsx)(d.default,{style:Y.label,children:"Preis pro Person:"}),(0,x.jsx)(u.default,{style:H,placeholder:"z. B. 50",value:z,onChangeText:v,keyboardType:"numeric",blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Hund:"}),(0,x.jsx)(V,{options:[{label:"Nein",value:"nein"},{label:"Ja",value:"ja"}],selectedValue:_,onChange:T}),(0,x.jsx)(d.default,{style:Y.label,children:"Zusatz Preis:"}),(0,x.jsx)(u.default,{style:H,placeholder:"z. B. 10",value:B,onChangeText:F,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Tel.: / email:"}),(0,x.jsx)(u.default,{style:H,placeholder:"Telefon oder Email",value:P,onChangeText:D,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsx)(d.default,{style:Y.label,children:"Notiz:"}),(0,x.jsx)(u.default,{style:[H,{height:80}],placeholder:"Notiz",value:W,onChangeText:M,multiline:!0,blurOnSubmit:!0,onSubmitEditing:I.default.dismiss}),(0,x.jsxs)(o.default,{style:Y.buttonRow,children:[(0,x.jsx)(c.default,{title:"Aktualisieren",disabled:!Z||K,onPress:q}),(0,x.jsx)(c.default,{title:"L\xf6schen",color:"red",onPress:U,disabled:K})]}),(0,x.jsx)(o.default,{style:Y.modalButtons,children:(0,x.jsx)(c.default,{title:"Schlie\xdfen",onPress:n,disabled:K})})]})})});return(0,x.jsx)(w.default,{isVisible:e,onBackdropPress:n,coverScreen:!0,useNativeDriver:!1,style:Y.modalContainer,propagateSwipe:!0,avoidKeyboard:!0,children:J})})),G=60,{width:Z}=D.default.get("window"),q=Z<400;function U(e){return e.includes("T")?new Date(e):new Date(e+"T00:00:00")}function J(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function X(e,t){return t.findIndex((t=>J(t.date,e)))}function Q(e){const t=e.getDate().toString().padStart(2,"0"),n=e.toLocaleDateString("de-DE",{month:"2-digit",year:"numeric"}).replace(".","/");return{date:new Date(e),dayNumber:t,monthYear:n}}function ee(e,t,n,a){if(!e)return!1;if(t.getTime()===n.getTime())return!0;for(const r of a){if(r.zimmer_id!==e)continue;const a=U(r.check_in),l=U(r.check_out);if(t<l&&n>a){if(n.getTime()===a.getTime()||t.getTime()===l.getTime())continue;return!1}}return!0}function te(e,t,n){return n.find((n=>{if(n.zimmer_id!==t)return!1;const a=U(n.check_in),r=U(n.check_out);return e.date>=a&&e.date<=r}))||null}const ne=r.memo((({day:e,isSelected:t,existingBooking:n,onPress:a})=>(0,x.jsx)(z.default,{style:[le.dayCell,{width:G,height:35},n&&{backgroundColor:"transparent"},t&&le.selectedDayCell],onPress:a,children:(0,x.jsx)(d.default,{style:le.dayCellText,children:e.dayNumber})}))),ae=r.memo((e=>{const{zimmer:t,bookings:n,daysArray:a,gaeste:r,onPressBooking:l,highlightedBookingId:i}=e;return(0,x.jsx)(o.default,{style:le.overlayContainer,children:n.map((e=>{const t=U(e.check_in),n=U(e.check_out),s=X(t,a),u=X(n,a);if(s<0||u<0)return null;let c=s*G,h=(u-s+1)*G;s===u?(c+=30,h=30):(c+=30,h-=G);const f=r.find((t=>t.id===e.gast_id)),g=f?`${f.vorname} ${f.nachname}`:"Unbekannt";let m="";"Fr\xfchst\xfcck"===e.verpflegung?m="B&B":"Halbpension"===e.verpflegung?m="HP":e.verpflegung&&(m=e.verpflegung);const b=`${g} (${e.anzahl_personen}P) ${m}`;let p="#ccffcc";return"belegt"===e.status?p="#ffcccc":"anzahlung"===e.status?p="#ffffcc":"booking"===e.status&&(p="#ccccff"),(0,x.jsx)(z.default,{activeOpacity:.8,onPress:()=>l(e),children:(0,x.jsx)(o.default,{style:[le.bookingBlock,{left:c,width:h,backgroundColor:p},i===e.id&&{borderWidth:3,borderColor:"black"}],children:(0,x.jsx)(d.default,{style:le.bookingBlockText,numberOfLines:2,children:b})})},e.id)}))})}));function re({buchungen:e,onRefresh:t}){const[n,a]=(0,r.useState)([]),[l,i]=(0,r.useState)(10),[s,h]=(0,r.useState)(6),[f,g]=(0,r.useState)([]),[p,y]=(0,r.useState)([]),[k,C]=(0,r.useState)(null),[w,v]=(0,r.useState)(null),[_,T]=(0,r.useState)(null),[B,F]=(0,r.useState)(null),[D,I]=(0,r.useState)(null),[E,O]=(0,r.useState)(null),[N,A]=(0,r.useState)(0),[R,L]=(0,r.useState)(!1),[W,$]=(0,r.useState)(!1),[V,H]=(0,r.useState)(null),[Y,Z]=(0,r.useState)(""),[re,ie]=(0,r.useState)(""),[se,oe]=(0,r.useState)(""),[de,ue]=(0,r.useState)(new Date),ce=(0,r.useRef)(null),he=(0,r.useRef)(0),fe=(0,r.useMemo)((()=>function(e,t){const n=new Date;n.setDate(n.getDate()-e);const a=new Date;a.setMonth(a.getMonth()+t);const r=[];let l=new Date(n);for(;l<=a;)r.push(Q(l)),l.setDate(l.getDate()+1);return r}(l,s)),[l,s]),ge=(0,r.useCallback)((async()=>{try{const{data:e}=await b.from("zimmer").select("*");e&&g(e);const{data:t}=await b.from("gaeste").select("*");t&&y(t)}catch(e){console.error("Fehler beim Laden von Zimmern/G\xe4sten:",e)}}),[]);(0,r.useEffect)((()=>{ge();const e=setInterval(ge,12e4);return()=>clearInterval(e)}),[ge]),(0,r.useEffect)((()=>{(async()=>{if(!k)return;const e=k.date.toISOString().split("T")[0],{data:t,error:n}=await b.from("preis_zeitraeume").select("preis_fruehstueck, preis_halbpension, startdatum, enddatum");if(n)return void console.error("Fehler beim Laden der Preiszeitr\xe4ume:",n.message);const a=t?.find((t=>e>=t.startdatum&&e<=t.enddatum));I(a?.preis_fruehstueck??null),O(a?.preis_halbpension??null)})()}),[k]),(0,r.useEffect)((()=>{a(e)}),[e]),(0,m.useFocusEffect)((0,r.useCallback)((()=>{const e=Date.now();e-he.current>3e4&&(t(),he.current=e)}),[t]));const me=(0,r.useCallback)((e=>{const t=e.nativeEvent.contentOffset.x+e.nativeEvent.layoutMeasurement.width/2,n=Math.floor(t/G);if(n>=0&&n<fe.length){const e=fe[n].date;e.getMonth()===de.getMonth()&&e.getFullYear()===de.getFullYear()||ue(e)}}),[fe,de]),be=(0,r.useCallback)((e=>{if(0===fe.length||!ce.current)return;const t=fe.findIndex((t=>t.date.getFullYear()===e.getFullYear()&&t.date.getMonth()===e.getMonth()));if(-1!==t){const e=80+t*G;ce.current.scrollTo({x:e,animated:!0})}}),[fe]),pe=(0,r.useCallback)((e=>{const t=de.getFullYear(),n=new Date(t,e,1);ue(n),be(n)}),[de,be]),xe=(0,r.useCallback)((()=>i((e=>e+90))),[]),ye=(0,r.useCallback)((()=>h((e=>e+3))),[]),je=(0,r.useCallback)(((e,t)=>{if(!k){if(!ee(t,e.date,e.date,n))return;return T(t),C(e),void v(e)}if(_!==t){if(!ee(t,e.date,e.date,n))return;return T(t),C(e),void v(e)}if(J(e.date,k.date))v(e);else{if(e.date>=k.date){const a=ee(t,k.date,e.date,n),r=te(e,t,n);return a||r&&J(e.date,U(r.check_in))?void v(e):void P.default.alert("Das Intervall ist nicht verf\xfcgbar.")}C(e),v(e)}}),[k,n,_]),ke=(0,r.useCallback)((()=>{if(!se.trim())return;const e=se.toLowerCase(),t=n.filter((t=>{const n=p.find((e=>e.id===t.gast_id));if(!n)return!1;return`${n.vorname} ${n.nachname}`.toLowerCase().includes(e)})).map((e=>e.id));if(t.length>0){const e=t[N%t.length];F(e),A(N+1);const a=n.find((t=>t.id===e));if(a){const e=X(U(a.check_in),fe);if(-1!==e&&ce.current){const t=80+e*G;ce.current.scrollTo({x:t,animated:!0})}}}else F(null),A(0)}),[se,n,p,fe,N]),Ce=(0,r.useCallback)((()=>{k&&w&&null!==_?J(k.date,w.date)?P.default.alert("Bitte w\xe4hlen Sie unterschiedliche Tage f\xfcr Check\u2011In und Check\u2011Out aus."):L(!0):P.default.alert("Bitte Check\u2011In und Check\u2011Out ausw\xe4hlen.")}),[k,w,_]),Se=(0,r.useCallback)((e=>{const t=p.find((t=>t.id===e.gast_id)),n={id:e.id,zimmer_id:e.zimmer_id,guestName:t?`${t.vorname} ${t.nachname}`:"Unbekannt",personCount:e.anzahl_personen,checkIn:e.check_in,checkOut:e.check_out,status:e.status,anzahlung:e.anzahlung,verpflegung:e.verpflegung||"",preisProPerson:e.preis_pro_person,hund:e.hund||!1,zusatz_preis:e.zusatz_preis,tel_email:e.tel_email,notiz:e.notiz||"",zimmerNumber:f.find((t=>t.id===e.zimmer_id))?.nummer||""};H(n),$(!0)}),[p,f]),ze=(0,r.useCallback)((async e=>{if(!k||!w||null===_)return void P.default.alert("Fehler","Bitte Check\u2011In, Check\u2011Out und Zimmer ausw\xe4hlen.");const n=k.date.toISOString().split("T")[0],a=w.date.toISOString().split("T")[0],r=e.guestName.trim().split(" ");if(r.length<2)return void P.default.alert("Fehler","Bitte Vor\u2011 und Nachname eingeben.");let l=null;const{data:i}=await b.from("gaeste").select("id").eq("vorname",r[0]).eq("nachname",r[1]);if(i&&i.length>0)l=i[0].id;else{const{data:e,error:t}=await b.from("gaeste").insert([{vorname:r[0],nachname:r[1]}]).select("*").single();if(t||!e)return void P.default.alert("Fehler","Gast konnte nicht erstellt werden.");l=e.id}const{error:s}=await b.from("buchungen").insert([{zimmer_id:_,gast_id:l,check_in:n,check_out:a,anzahl_personen:e.personCount,preis_pro_person:e.preisProPerson??0,anzahlung:e.anzahlung,status:e.status,verpflegung:e.verpflegung,hund:e.hund,zusatz_preis:e.zusatzPreis,tel_email:e.tel_email,notiz:e.notiz}]);s?P.default.alert("Fehler",s.message):(P.default.alert("Erfolg","Buchung erstellt!"),T(null),C(null),v(null),setTimeout((()=>{t(),ge()}),4e3))}),[k,w,_,t,ge]),we=(0,r.useCallback)((async e=>{await t(),await ge(),$(!1),H(null)}),[t,ge]),ve=(0,r.useCallback)((async e=>{await t(),await ge(),$(!1),H(null)}),[t,ge]);return(0,x.jsxs)(o.default,{style:le.container,children:[(0,x.jsx)(j,{title:"Zimmer-Kalender"}),(0,x.jsxs)(o.default,{style:le.controlsContainer,children:[(0,x.jsx)(c.default,{title:"-3 Monate",onPress:xe}),(0,x.jsx)(d.default,{style:le.monthYearText,children:de.toLocaleDateString("de-DE",{month:"long",year:"numeric"})}),(0,x.jsx)(c.default,{title:"+3 Monate",onPress:ye})]}),(0,x.jsx)(o.default,{style:le.monthButtonsContainer,children:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"].map(((e,t)=>(0,x.jsx)(z.default,{style:le.monthButton,onPress:()=>pe(t),children:(0,x.jsx)(d.default,{style:le.monthButtonText,children:q?e.substring(0,2):e})},t)))}),(0,x.jsxs)(o.default,{style:le.tableContainer,children:[(0,x.jsxs)(o.default,{style:le.fixedColumn,children:[(0,x.jsx)(o.default,{style:[le.headerCell,le.leftHeaderCell],children:(0,x.jsx)(d.default,{style:le.headerCellText,children:"Zimmer"})}),f.map((e=>(0,x.jsx)(o.default,{style:le.zimmerCell,children:(0,x.jsxs)(d.default,{style:le.zimmerText,children:["Z. ",e.nummer]})},e.id)))]}),(0,x.jsx)(S.default,{horizontal:!0,style:le.horizontalScroll,ref:ce,onScroll:me,scrollEventThrottle:16,children:(0,x.jsxs)(o.default,{children:[(0,x.jsx)(o.default,{style:le.headerRow,children:fe.map((e=>{const t=J(e.date,new Date),n=e.date.toLocaleDateString("de-DE",{weekday:"short"}),a=n.startsWith("Sa")||n.startsWith("So");return(0,x.jsxs)(o.default,{style:[le.headerCell,{width:G},t&&le.todayHeader,a&&le.weekendHeader],children:[(0,x.jsxs)(d.default,{style:le.headerSmallText,children:[n," ",e.monthYear]}),(0,x.jsx)(d.default,{style:le.headerDayNumber,children:e.dayNumber})]},e.date.toISOString())}))}),f.map((e=>(0,x.jsxs)(o.default,{style:{position:"relative",height:35},children:[(0,x.jsx)(o.default,{style:le.zimmerRow,children:fe.map((t=>{const a=_===e.id&&(k&&J(t.date,k.date)||w&&J(t.date,w.date)),r=te(t,e.id,n);return(0,x.jsx)(ne,{day:t,isSelected:a,existingBooking:r,onPress:()=>{k?je(t,e.id):r||je(t,e.id)}},t.date.toISOString())}))}),(0,x.jsx)(ae,{zimmer:e,bookings:n.filter((t=>t.zimmer_id===e.id)),daysArray:fe,gaeste:p,onPressBooking:Se,highlightedBookingId:B})]},e.id)))]})})]}),k&&(0,x.jsxs)(o.default,{style:{padding:10,backgroundColor:"#f0f0f0",flexDirection:"column",alignItems:"flex-start"},children:[(0,x.jsxs)(d.default,{style:{fontWeight:"bold"},children:["Preis pro Person f\xfcr den Check-in am ",k.date.toLocaleDateString("de-DE"),":"]}),(0,x.jsxs)(d.default,{children:["Mit Fr\xfchst\xfcck: ",D?.toFixed(2)??"\u2013"," \u20ac"]}),(0,x.jsxs)(d.default,{children:["Mit Halbpension: ",E?.toFixed(2)??"\u2013"," \u20ac"]})]}),(0,x.jsxs)(o.default,{style:le.searchContainer,children:[(0,x.jsx)(u.default,{style:le.searchInput,placeholder:"Nach Gastname suchen...",value:se,onChangeText:oe}),(0,x.jsx)(c.default,{title:"Suchen",onPress:ke})]}),k&&w&&!J(k.date,w.date)&&(0,x.jsx)(z.default,{style:le.bookingButton,onPress:Ce,children:(0,x.jsx)(d.default,{style:le.bookingButtonText,children:"Buchungsformular \xf6ffnen"})}),(0,x.jsx)(M,{isVisible:R,checkIn:k?k.date.toISOString().split("T")[0]:"",checkOut:w?w.date.toISOString().split("T")[0]:"",onClose:()=>L(!1),onSubmit:ze,initialGuestName:Y,initialPersonCount:re?parseInt(re):0,onRefresh:t,selectedzimmerId:_||void 0}),V&&(0,x.jsx)(K,{isVisible:W,booking:V,onClose:()=>{$(!1),H(null)},onUpdate:we,onDelete:ve,onRefresh:t})]})}const le=h.default.create({container:{flex:1,backgroundColor:"#fff",paddingTop:40},containerLandscape:{paddingBottom:20},controlsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:40,paddingHorizontal:16,backgroundColor:"#f5f5f5"},monthYearText:{fontSize:16,fontWeight:"bold"},monthButtonsContainer:{flexDirection:"row",justifyContent:"space-around",marginVertical:8,paddingHorizontal:16,backgroundColor:"#eee"},monthButton:{paddingVertical:6,paddingHorizontal:10,borderRadius:4,backgroundColor:"#ddd"},monthButtonText:{fontSize:12,fontWeight:"500"},tableContainer:{flex:1,position:"relative"},fixedColumn:{width:80,position:"absolute",left:0,top:0,bottom:0,zIndex:1},horizontalScroll:{flex:1,marginLeft:80},headerRow:{flexDirection:"row",borderBottomWidth:1,borderColor:"#ccc"},headerCell:{backgroundColor:"#eee",borderRightWidth:1,borderBottomWidth:1,borderColor:"#ccc",justifyContent:"center",alignItems:"center",height:35},headerSmallText:{fontSize:10,color:"#555"},headerDayNumber:{fontSize:16,fontWeight:"bold",color:"#333"},headerCellText:{fontSize:12,fontWeight:"bold"},leftHeaderCell:{borderBottomWidth:1,borderColor:"#ccc"},todayHeader:{backgroundColor:"#b3e6ff"},weekendHeader:{backgroundColor:"#cccccc"},zimmerRow:{flexDirection:"row"},zimmerCell:{backgroundColor:"#fafafa",borderBottomWidth:1,borderColor:"#ccc",justifyContent:"center",alignItems:"center",height:35,width:80},zimmerText:{fontSize:12,fontWeight:"bold"},dayCell:{borderRightWidth:1,borderBottomWidth:1,borderColor:"#ccc",justifyContent:"center",alignItems:"center"},selectedDayCell:{backgroundColor:"#d0f0ff"},dayCellText:{fontSize:10,color:"#333"},overlayContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"box-none"},bookingBlock:{position:"absolute",top:0,height:35,borderWidth:1,borderColor:"#99cc99",justifyContent:"center",alignItems:"center",paddingHorizontal:2},bookingBlockText:{fontSize:9,fontWeight:"600",color:"#333",textAlign:"center",flexWrap:"wrap"},bookingButton:{backgroundColor:"#007AFF",padding:12,margin:16,borderRadius:6,alignItems:"center"},bookingButtonText:{color:"#fff",fontSize:16},searchContainer:{flexDirection:"row",alignItems:"center",padding:8},searchInput:{flex:1,borderWidth:1,borderColor:"#ccc",padding:8,borderRadius:4,marginRight:8}}),ie=h.default.create({container:{flex:1,padding:16,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:16},searchInput:{borderWidth:1,borderColor:"#ccc",padding:8,marginBottom:16,borderRadius:4},sectionTitle:{fontSize:20,fontWeight:"bold",marginTop:16,marginBottom:8},card:{backgroundColor:"#f9f9f9",padding:12,borderRadius:6,marginBottom:12},boldText:{fontWeight:"bold"},radioGroup:{flexDirection:"row",marginTop:8},radioButton:{padding:8,borderWidth:1,borderColor:"#ccc",backgroundColor:"#f0f0f0",borderRadius:4,marginRight:8},radioButtonRed:{backgroundColor:"#FF5733",borderColor:"#FF5733"},radioButtonGreen:{backgroundColor:"#4CAF50",borderColor:"#4CAF50"},radioText:{fontSize:16,color:"#000"}}),se=({onRefresh:e})=>{const[t,n]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[i,s]=(0,r.useState)(""),c=async()=>{try{const e=(new Date).toISOString().split("T")[0],{data:t,error:a}=await b.from("buchungen").select("*").or("status.eq.anzahlung,status.eq.anzahlung_bezahlt").gte("check_in",e).is("deleted_at",null).order("check_in",{ascending:!0});if(a)throw a;t&&n(t);const{data:r,error:i}=await b.from("gaeste").select("*");if(i)throw i;r&&l(r)}catch(e){console.error("Fehler beim Laden der Daten:",e),P.default.alert("Fehler","Daten konnten nicht geladen werden.")}};(0,r.useEffect)((()=>{c();const e=setInterval(c,12e4);return()=>clearInterval(e)}),[]),(0,r.useEffect)((()=>{e&&e()}),[e]);const h=async(e,t)=>{try{const{error:n}=await b.from("buchungen").update({status:t}).eq("id",e);if(n)throw n;P.default.alert("Erfolg","Status erfolgreich ge\xe4ndert."),c()}catch(n){console.error("Fehler beim Aktualisieren des Status:",n),P.default.alert("Fehler","Status konnte nicht ge\xe4ndert werden.")}},f=i?t.filter((e=>{const t=a.find((t=>t.id===e.gast_id));if(!t)return!1;return`${t.vorname} ${t.nachname}`.toLowerCase().includes(i.toLowerCase())})):t,g=f.filter((e=>"anzahlung"===e.status&&new Date(e.check_in)>new Date)).reduce(((e,t)=>e+t.anzahlung),0),m=f.filter((e=>"anzahlung_bezahlt"===e.status&&new Date(e.check_out)>new Date)).reduce(((e,t)=>e+t.anzahlung),0);return(0,x.jsxs)(S.default,{style:ie.container,children:[(0,x.jsx)(j,{}),(0,x.jsx)(d.default,{style:ie.title,children:"Anzahlungen"}),(0,x.jsx)(u.default,{style:ie.searchInput,placeholder:"G\xe4ste suchen...",value:i,onChangeText:s}),(0,x.jsxs)(d.default,{style:ie.sectionTitle,children:["Offene Anzahlungen (",g," \u20ac)"]}),f.filter((e=>"anzahlung"===e.status)).map((e=>{const t=a.find((t=>t.id===e.gast_id));return(0,x.jsxs)(o.default,{style:ie.card,children:[(0,x.jsxs)(d.default,{children:[(0,x.jsx)(d.default,{style:ie.boldText,children:t?`${t.vorname} ${t.nachname}`:"Unbekannter Gast"})," - ",e.check_in," bis ",e.check_out]}),(0,x.jsxs)(d.default,{children:["Anzahlung: ",e.anzahlung," \u20ac"]}),(0,x.jsxs)(o.default,{style:ie.radioGroup,children:[(0,x.jsx)(z.default,{style:[ie.radioButton,"anzahlung"===e.status&&ie.radioButtonRed],onPress:()=>h(e.id,"anzahlung"),children:(0,x.jsx)(d.default,{style:ie.radioText,children:"Nicht bezahlt"})}),(0,x.jsx)(z.default,{style:[ie.radioButton,"anzahlung_bezahlt"===e.status&&ie.radioButtonGreen],onPress:()=>h(e.id,"anzahlung_bezahlt"),children:(0,x.jsx)(d.default,{style:ie.radioText,children:"Bezahlt"})})]})]},e.id)})),(0,x.jsxs)(d.default,{style:ie.sectionTitle,children:["Bezahlte Anzahlungen (",m," \u20ac)"]}),f.filter((e=>"anzahlung_bezahlt"===e.status)).map((e=>{const t=a.find((t=>t.id===e.gast_id));return(0,x.jsxs)(o.default,{style:ie.card,children:[(0,x.jsxs)(d.default,{children:[(0,x.jsx)(d.default,{style:ie.boldText,children:t?`${t.vorname} ${t.nachname}`:"Unbekannter Gast"})," - ",e.check_in," bis ",e.check_out]}),(0,x.jsxs)(d.default,{children:["Anzahlung: ",e.anzahlung," \u20ac"]}),(0,x.jsxs)(o.default,{style:ie.radioGroup,children:[(0,x.jsx)(z.default,{style:[ie.radioButton,"anzahlung"===e.status&&ie.radioButtonRed],onPress:()=>h(e.id,"anzahlung"),children:(0,x.jsx)(d.default,{style:ie.radioText,children:"Nicht bezahlt"})}),(0,x.jsx)(z.default,{style:[ie.radioButton,"anzahlung_bezahlt"===e.status&&ie.radioButtonGreen],onPress:()=>h(e.id,"anzahlung_bezahlt"),children:(0,x.jsx)(d.default,{style:ie.radioText,children:"Bezahlt"})})]})]},e.id)}))]})};var oe=n(932),de=n(8264);const ue=h.default.create({container:{flex:1,padding:20},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:24},section:{marginBottom:40},sectionTitle:{fontSize:18,fontWeight:"bold",marginBottom:12},input:{height:40,borderColor:"#ccc",borderWidth:1,borderRadius:4,paddingHorizontal:10,marginBottom:12},ferienItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},ferienButtons:{flexDirection:"row",gap:8},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,width:"80%"}}),ce=()=>{const e=(0,m.useNavigation)(),[t,n]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,s]=(0,r.useState)([]),[h,f]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[j,k]=(0,r.useState)(""),[C,z]=(0,r.useState)(""),[w,v]=(0,r.useState)(""),[_,T]=(0,r.useState)(""),[B,F]=(0,r.useState)(""),[D,I]=(0,r.useState)(""),[E,O]=(0,r.useState)([]),[N,A]=(0,r.useState)({aufschlag1Nacht:"",rabattKind614:"",rabattKind36:"",fixpreisKind3:"",rabattWeiterePerson:"",hundepreis:""}),R=async()=>{try{const e=(new Date).toISOString().split("T")[0],{data:t,error:n}=await b.from("buchungen").select("check_in, check_out").eq("status","Ferien").gt("check_out",e);if(n)throw n;const a={};t.forEach((e=>{const t=`${e.check_in}_${e.check_out}`;a[t]={check_in:e.check_in,check_out:e.check_out}})),s(Object.values(a))}catch(e){P.default.alert("Fehler",e.message)}},L=async()=>{try{const{data:e,error:t}=await b.from("preis_zeitraeume").select("*").order("startdatum");if(t)throw t;O(e||[])}catch(e){P.default.alert("Fehler beim Laden der Preise",e.message)}};return(0,r.useEffect)((()=>{R(),L(),(async()=>{try{const{data:e,error:t}=await b.from("preisregeln").select("*");if(t)throw t;const n=Object.assign({},N);e.forEach((e=>{switch(e.name){case"aufschlag_1nacht":n.aufschlag1Nacht=e.wert.toString();break;case"rabatt_kind_6_14":n.rabattKind614=e.wert.toString();break;case"rabatt_kind_3_6":n.rabattKind36=e.wert.toString();break;case"fixpreis_kind_bis_3":n.fixpreisKind3=e.wert.toString();break;case"rabatt_weitere_person":n.rabattWeiterePerson=e.wert.toString();break;case"hundepreis":n.hundepreis=e.wert.toString()}})),A(n)}catch(e){P.default.alert("Fehler beim Laden der Regeln",e.message)}})()}),[]),(0,x.jsxs)(S.default,{style:ue.container,children:[(0,x.jsx)(d.default,{style:ue.title,children:"Einstellungen"}),(0,x.jsxs)(o.default,{style:ue.section,children:[(0,x.jsx)(d.default,{style:ue.sectionTitle,children:"Ferien eintragen"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Startdatum (YYYY-MM-DD)",value:t,onChangeText:n}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Enddatum (YYYY-MM-DD)",value:a,onChangeText:l}),(0,x.jsx)(c.default,{title:"Ferien eintragen",onPress:async()=>{if(t&&a)try{const{data:e,error:r}=await b.from("buchungen").select("zimmer_id").filter("check_in","lt",a).filter("check_out","gt",t);if(r)throw r;if(e.length>0)return void P.default.alert("Nicht m\xf6glich","Es existieren Buchungen in diesem Zeitraum.");const{data:i,error:s}=await b.from("zimmer").select("id");if(s)throw s;const{data:o}=await b.from("gaeste").select("id").eq("vorname","Ferien").eq("nachname","Ferien");let d=o?.[0]?.id;if(!d){const{data:e,error:t}=await b.from("gaeste").insert([{vorname:"Ferien",nachname:"Ferien"}]).select().single();if(t)throw t;d=e.id}const u=i.map((e=>({zimmer_id:e.id,gast_id:d,check_in:t,check_out:a,anzahl_personen:0,preis_pro_person:0,anzahlung:0,status:"Ferien",verpflegung:"",hund:!1,zusatz_preis:"",tel_email:"",notiz:"Ferienbuchung"}))),{error:c}=await b.from("buchungen").insert(u);if(c)throw c;P.default.alert("Erfolg","Ferien geblockt."),n(""),l(""),R()}catch(e){P.default.alert("Fehler",e.message)}else P.default.alert("Fehler","Bitte Start- und Enddatum angeben.")}})]}),(0,x.jsxs)(o.default,{style:ue.section,children:[(0,x.jsx)(d.default,{style:ue.sectionTitle,children:"Bevorstehende Ferien"}),(0,x.jsx)(oe.default,{data:i,keyExtractor:e=>e.check_in+"_"+e.check_out,renderItem:({item:e})=>(0,x.jsxs)(o.default,{style:ue.ferienItem,children:[(0,x.jsxs)(d.default,{children:[e.check_in," bis ",e.check_out]}),(0,x.jsxs)(o.default,{style:ue.ferienButtons,children:[(0,x.jsx)(c.default,{title:"Bearbeiten",onPress:()=>{y(e),k(e.check_in),z(e.check_out),f(!0)}}),(0,x.jsx)(c.default,{title:"L\xf6schen",onPress:()=>(async(e,t)=>{try{const{error:n}=await b.from("buchungen").delete().eq("status","Ferien").eq("check_in",e).eq("check_out",t);if(n)throw n;P.default.alert("Erfolg","Ferien gel\xf6scht."),R()}catch(n){P.default.alert("Fehler beim L\xf6schen",n.message)}})(e.check_in,e.check_out),color:"red"})]})]}),ListEmptyComponent:(0,x.jsx)(d.default,{children:"Keine Ferien eingetragen."})})]}),(0,x.jsx)(de.default,{visible:h,animationType:"slide",transparent:!0,children:(0,x.jsx)(o.default,{style:ue.modalContainer,children:(0,x.jsxs)(o.default,{style:ue.modalContent,children:[(0,x.jsx)(d.default,{children:"Ferien bearbeiten"}),(0,x.jsx)(u.default,{style:ue.input,value:j,onChangeText:k,placeholder:"Neues Startdatum"}),(0,x.jsx)(u.default,{style:ue.input,value:C,onChangeText:z,placeholder:"Neues Enddatum"}),(0,x.jsx)(c.default,{title:"Speichern",onPress:async()=>{try{if(!p)return;await b.from("buchungen").update({check_in:j,check_out:C}).eq("status","Ferien").eq("check_in",p.check_in).eq("check_out",p.check_out),f(!1),R()}catch(e){P.default.alert("Fehler beim Bearbeiten",e.message)}}}),(0,x.jsx)(c.default,{title:"Abbrechen",color:"red",onPress:()=>f(!1)})]})})}),(0,x.jsxs)(o.default,{style:ue.section,children:[(0,x.jsx)(d.default,{style:ue.sectionTitle,children:"Preis-Zeitr\xe4ume"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Startdatum",value:w,onChangeText:v}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Enddatum",value:_,onChangeText:T}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Fr\xfchst\xfcck (\u20ac)",value:B,onChangeText:F,keyboardType:"numeric"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Halbpension (\u20ac)",value:D,onChangeText:I,keyboardType:"numeric"}),(0,x.jsx)(c.default,{title:"Speichern",onPress:async()=>{if(w&&_&&B&&D)try{const e=parseFloat(B),t=parseFloat(D);if(isNaN(e)||isNaN(t))throw new Error("Ung\xfcltige Preisangaben");const{error:n}=await b.from("preis_zeitraeume").insert([{startdatum:w,enddatum:_,preis_fruehstueck:e,preis_halbpension:t}]);if(n)throw n;v(""),T(""),F(""),I(""),L()}catch(e){P.default.alert("Fehler beim Speichern",e.message)}else P.default.alert("Fehler","Bitte alle Felder ausf\xfcllen.")}}),E.map((e=>(0,x.jsxs)(o.default,{style:ue.ferienItem,children:[(0,x.jsxs)(d.default,{children:[e.startdatum," bis ",e.enddatum," \u2014 Fr\xfchst\xfcck: ",e.preis_fruehstueck," \u20ac, Halbpension: ",e.preis_halbpension," \u20ac"]}),(0,x.jsx)(c.default,{title:"L\xf6schen",color:"red",onPress:async()=>{const{error:t}=await b.from("preis_zeitraeume").delete().eq("id",e.id);t||L()}})]},e.id)))]}),(0,x.jsxs)(o.default,{style:ue.section,children:[(0,x.jsx)(d.default,{style:ue.sectionTitle,children:"Preisregeln"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Aufschlag bei 1 Nacht (%)",value:N.aufschlag1Nacht,onChangeText:e=>A((t=>Object.assign({},t,{aufschlag1Nacht:e}))),keyboardType:"numeric"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Abschlag Kinder 6-14 (%)",value:N.rabattKind614,onChangeText:e=>A((t=>Object.assign({},t,{rabattKind614:e}))),keyboardType:"numeric"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Abschlag Kinder 3-6 (%)",value:N.rabattKind36,onChangeText:e=>A((t=>Object.assign({},t,{rabattKind36:e}))),keyboardType:"numeric"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Fixpreis Kind bis 3 (\u20ac)",value:N.fixpreisKind3,onChangeText:e=>A((t=>Object.assign({},t,{fixpreisKind3:e}))),keyboardType:"numeric"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Rabatt weitere Person (%)",value:N.rabattWeiterePerson,onChangeText:e=>A((t=>Object.assign({},t,{rabattWeiterePerson:e}))),keyboardType:"numeric"}),(0,x.jsx)(u.default,{style:ue.input,placeholder:"Hundepreis (\u20ac)",value:N.hundepreis,onChangeText:e=>A((t=>Object.assign({},t,{hundepreis:e}))),keyboardType:"numeric"}),(0,x.jsx)(c.default,{title:"Preisregeln speichern",onPress:async()=>{try{const e=[{name:"aufschlag_1nacht",wert:parseFloat(N.aufschlag1Nacht),einheit:"PERCENT"},{name:"rabatt_kind_6_14",wert:parseFloat(N.rabattKind614),einheit:"PERCENT"},{name:"rabatt_kind_3_6",wert:parseFloat(N.rabattKind36),einheit:"PERCENT"},{name:"fixpreis_kind_bis_3",wert:parseFloat(N.fixpreisKind3),einheit:"EUR"},{name:"rabatt_weitere_person",wert:parseFloat(N.rabattWeiterePerson),einheit:"PERCENT"},{name:"hundepreis",wert:parseFloat(N.hundepreis),einheit:"EUR"}];for(const t of e)isNaN(t.wert)||await b.from("preisregeln").upsert(t,{onConflict:["name"]});P.default.alert("Erfolg","Preisregeln gespeichert.")}catch(e){P.default.alert("Fehler beim Speichern",e.message)}}})]}),(0,x.jsxs)(o.default,{style:ue.section,children:[(0,x.jsx)(d.default,{style:ue.sectionTitle,children:"Logout"}),(0,x.jsx)(c.default,{title:"Logout",onPress:async()=>{try{await b.auth.signOut(),await g.default.clear(),e.reset({index:0,routes:[{name:"Login"}]})}catch(t){P.default.alert("Fehler",t.message||"Logout fehlgeschlagen.")}},color:"red"})]})]})},he=(0,i.createNativeStackNavigator)();(0,a.default)((function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),i=(0,r.useCallback)((async()=>{if(n)try{const e=new Date;e.setDate(e.getDate()-5),console.log("\ud83e\uddf9 L\xf6sche Buchungen mit deleted_at \xe4lter als:",e.toISOString());const{error:t}=await b.from("buchungen").delete().lt("deleted_at",e.toISOString());t?console.error("\u274c Fehler beim L\xf6schen alter Buchungen:",t):console.log("\u2705 Alte gel\xf6schte Buchungen erfolgreich entfernt.")}catch(e){console.error("\u26a0\ufe0f Fehler in deleteOldDeletedBuchungen:",e)}}),[n]),o=(0,r.useCallback)((async()=>{if(n)try{console.log("\ud83d\udd04 Vollst\xe4ndiges Laden der Buchungen...");const{data:e,error:n}=await b.from("buchungen").select("*").is("deleted_at",null);if(n)return void console.error("\u274c Fehler beim Voll-Laden der Buchungen:",n);console.log("\ud83d\udce5 Vollst\xe4ndig geladene Buchungen:",e),e&&t(e)}catch(e){console.error("\u26a0\ufe0f Fehler in syncFullBuchungen:",e)}}),[n]);return(0,r.useEffect)((()=>{const e=s.default.addEventListener((e=>{a(e.isConnected)}));i(),o();const t=setInterval(o,12e4);return()=>{clearInterval(t),e()}}),[i,o]),console.log("\ud83d\udcca Buchungen in App.tsx:",e),(0,x.jsx)(l.NavigationContainer,{children:(0,x.jsxs)(he.Navigator,{initialRouteName:"Login",children:[(0,x.jsx)(he.Screen,{name:"Login",component:k}),(0,x.jsx)(he.Screen,{name:"Home",component:F}),(0,x.jsx)(he.Screen,{name:"Calendarscreen",children:()=>(0,x.jsx)(re,{buchungen:e,onRefresh:o})}),(0,x.jsx)(he.Screen,{name:"AnzahlungenScreen",children:()=>(0,x.jsx)(se,{onRefresh:o})}),(0,x.jsx)(he.Screen,{name:"EinstellungenScreen",component:ce})]})})}))},4082:(e,t,n)=>{e.exports=n.p+"static/media/logo.dd0213c004f3f047ac5b.png"},7635:(e,t,n)=>{e.exports=n.p+"static/media/LogoBetrieb.c5ef20b02b90bcffbb09.png"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,(()=>{var e=[];n.O=(t,a,r,l)=>{if(!a){var i=1/0;for(u=0;u<e.length;u++){for(var[a,r,l]=e[u],s=!0,o=0;o<a.length;o++)(!1&l||i>=l)&&Object.keys(n.O).every((e=>n.O[e](a[o])))?a.splice(o--,1):(s=!1,l<i&&(i=l));if(s){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,r,l]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var l=Object.create(null);n.r(l);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>a[e]));return i.default=()=>a,n.d(l,i),l}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>"static/js/"+e+".783bc47a.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="web:";n.l=(a,r,l,i)=>{if(e[a])e[a].push(r);else{var s,o;if(void 0!==l)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==a||c.getAttribute("data-webpack")==t+l){s=c;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+l),s.src=a),e[a]=[r];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var r=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),o&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Oberraut/",(()=>{var e={792:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var l=new Promise(((n,a)=>r=e[t]=[n,a]));a.push(r[2]=l);var i=n.p+n.u(t),s=new Error;n.l(i,(a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var l=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+l+": "+i+")",s.name="ChunkLoadError",s.type=l,s.request=i,r[1](s)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,a)=>{var r,l,[i,s,o]=a,d=0;if(i.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(o)var u=o(n)}for(t&&t(a);d<i.length;d++)l=i[d],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[624],(()=>n(211)));a=n.O(a)})();
//# sourceMappingURL=main.b1f01f2a.js.map
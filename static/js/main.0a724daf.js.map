{"version":3,"file":"static/js/main.0a724daf.js","mappings":"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","sources":["src/supabaseClient.js","src/components/Header.tsx","src/screens/LoginScreen.tsx","src/screens/HomeScreen.tsx","src/components/BookingFormModal.tsx","src/components/BookingEditModal.tsx","src/screens/CalendarScreen.tsx","src/screens/AnzahlungenScreen.tsx","src/screens/EinstellungenScreen.tsx","App.tsx","index.ts","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/create fake namespace object","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["// src/supabaseClient.ts\r\n\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = \"https://elywhketsxozigeycjkj.supabase.co\";\r\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVseXdoa2V0c3hvemlnZXljamtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0OTU5MjEsImV4cCI6MjA1NjA3MTkyMX0.oIfd4wPU2UocrmRXIWeCHsofz2rFekWTD5ISMiRAQ70\";\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\n","import React from 'react';\r\nimport { View, Image, StyleSheet, Text } from 'react-native';\r\n\r\ninterface HeaderProps {\r\n  title?: string;\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = ({ title }) => {\r\n  return (\r\n    <View style={styles.header}>\r\n      {/* Linke Seite: Hauptlogo */}\r\n      <View style={styles.sideContainer}>\r\n        <Image source={require('../../assets/logo.png')} style={styles.logo} />\r\n      </View>\r\n\r\n      {/* Mittlere Seite: Titel (wird von der jeweiligen Seite übergeben) */}\r\n      <View style={styles.centerContainer}>\r\n        {title && <Text style={styles.title}>{title}</Text>}\r\n      </View>\r\n\r\n      {/* Rechte Seite: Betriebslogo */}\r\n      <View style={styles.sideContainer}>\r\n        <Image source={require('../../assets/LogoBetrieb.png')} style={styles.logoBetrieb} />\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  header: {\r\n    height: 50,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#ccc',\r\n    paddingHorizontal: 10,\r\n  },\r\n  sideContainer: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n  centerContainer: {\r\n    flex: 2,\r\n    alignItems: 'center',\r\n  },\r\n  logo: {\r\n    width: 80,\r\n    height: 40,\r\n    resizeMode: 'contain',\r\n  },\r\n  logoBetrieb: {\r\n    width: 100,\r\n    height: 40,\r\n    resizeMode: 'contain',\r\n  },\r\n  title: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n  },\r\n});\r\n\r\nexport default Header;\r\n","// src/screens/LoginScreen.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { View, Text, TextInput, Button, StyleSheet, ActivityIndicator } from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { supabase } from '../supabaseClient';\r\nimport Header from '../components/Header';\r\n\r\ntype RootStackParamList = {\r\n  Login: undefined;\r\n  Home: undefined;\r\n};\r\n\r\ntype LoginScreenNavigationProp = NativeStackNavigationProp<\r\n  RootStackParamList,\r\n  'Login'\r\n>;\r\n\r\nexport default function LoginScreen() {\r\n  const navigation = useNavigation<LoginScreenNavigationProp>();\r\n  const [email, setEmail] = useState<string>('');\r\n  const [password, setPassword] = useState<string>('');\r\n  const [errorMsg, setErrorMsg] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    const checkLoginStatus = async () => {\r\n      try {\r\n        const lastLogin = await AsyncStorage.getItem('lastLogin');\r\n        const { data: { session } } = await supabase.auth.getSession();\r\n        if (lastLogin && session) {\r\n          const lastLoginTime = new Date(parseInt(lastLogin));\r\n          const now = new Date();\r\n          const differenceInHours = (now.getTime() - lastLoginTime.getTime()) / (1000 * 60 * 60);\r\n          if (differenceInHours < 24) {\r\n            navigation.replace('Home');\r\n            return;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Fehler beim Prüfen der gespeicherten Anmeldung:', error);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    checkLoginStatus();\r\n  }, []);\r\n\r\n  const handleLogin = async () => {\r\n    setErrorMsg('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data, error } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n      });\r\n\r\n      if (error || !data.user) {\r\n        setErrorMsg(error ? error.message : 'Login fehlgeschlagen');\r\n        setLoading(false);\r\n      } else {\r\n        await AsyncStorage.setItem('lastLogin', Date.now().toString());\r\n        navigation.replace('Home');\r\n      }\r\n    } catch (err: any) {\r\n      setErrorMsg(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" />\r\n        <Text>Prüfe Login...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Header />\r\n      <Text style={styles.title}>Login</Text>\r\n      {errorMsg ? <Text style={styles.error}>{errorMsg}</Text> : null}\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"E-Mail\"\r\n        autoCapitalize=\"none\"\r\n        keyboardType=\"email-address\"\r\n        value={email}\r\n        onChangeText={setEmail}\r\n      />\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"Passwort\"\r\n        secureTextEntry\r\n        value={password}\r\n        onChangeText={setPassword}\r\n      />\r\n      <Button title=\"Einloggen\" onPress={handleLogin} disabled={loading} />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 20,\r\n    justifyContent: 'center',\r\n  },\r\n  title: {\r\n    fontSize: 26,\r\n    marginBottom: 20,\r\n    textAlign: 'center',\r\n  },\r\n  error: {\r\n    color: 'red',\r\n    marginBottom: 10,\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    marginBottom: 12,\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 10,\r\n    borderRadius: 6,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Button,\r\n  Alert,\r\n  Platform,\r\n} from 'react-native';\r\nimport Modal from 'react-native-modal';\r\nimport { supabase } from '../supabaseClient';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport Header from '../components/Header';\r\n\r\nexport type DayCellData = {\r\n  date: Date;\r\n  dayNumber: string;\r\n  monthYear: string;\r\n};\r\n\r\ntype Zimmer = {\r\n  id: number;\r\n  nummer: string;\r\n};\r\n\r\ntype Buchung = {\r\n  id: number;\r\n  zimmer_id: number;\r\n  gast_id: number | null;\r\n  check_in: string;\r\n  check_out: string;\r\n  anzahl_personen: number;\r\n  status: string;\r\n  verpflegung: string | null;\r\n  zusatz_preis: string;\r\n  tel_email: string;\r\n};\r\n\r\ntype Gast = {\r\n  id: number;\r\n  vorname: string;\r\n  nachname: string;\r\n};\r\n\r\nconst DAY_WIDTH = 60;\r\nconst FIXED_WIDTH = 80;\r\nconst ROW_HEIGHT = 35;\r\n\r\nfunction generateExtendedDaysArray(): DayCellData[] {\r\n  const result: DayCellData[] = [];\r\n  const startDate = new Date();\r\n  startDate.setDate(startDate.getDate() - 60);\r\n  const endDate = new Date();\r\n  endDate.setMonth(endDate.getMonth() + 18);\r\n  let current = new Date(startDate);\r\n  while (current <= endDate) {\r\n    const dayNumber = current.getDate().toString().padStart(2, '0');\r\n    const monthYear = current.toLocaleDateString('de-DE', {\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n    }).replace('.', '/');\r\n    result.push({ date: new Date(current), dayNumber, monthYear });\r\n    current.setDate(current.getDate() + 1);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction isSameDay(d1: Date, d2: Date): boolean {\r\n  return (\r\n    d1.getFullYear() === d2.getFullYear() &&\r\n    d1.getMonth() === d2.getMonth() &&\r\n    d1.getDate() === d2.getDate()\r\n  );\r\n}\r\n\r\nfunction findDayIndex(date: Date, days: DayCellData[]): number {\r\n  return days.findIndex((d) => isSameDay(d.date, date));\r\n}\r\n\r\nfunction getBuchungForDay(\r\n  dayData: DayCellData,\r\n  zimmerId: number,\r\n  buchungen: Buchung[]\r\n): Buchung | null {\r\n  return (\r\n    buchungen.find((b) => {\r\n      if (b.zimmer_id !== zimmerId) return false;\r\n      const start = new Date(b.check_in);\r\n      const end = new Date(b.check_out);\r\n      return dayData.date >= start && dayData.date <= end;\r\n    }) || null\r\n  );\r\n}\r\n\r\nconst HomeScreen: React.FC = () => {\r\n  const [daysArray, setDaysArray] = useState<DayCellData[]>([]);\r\n  const [zimmer, setZimmer] = useState<Zimmer[]>([]);\r\n  const [buchungen, setBuchungen] = useState<Buchung[]>([]);\r\n  const [gaeste, setGaeste] = useState<Gast[]>([]);\r\n  const [selectedDate, setSelectedDate] = useState(new Date());\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [detailModalVisible, setDetailModalVisible] = useState(false);\r\n  const [selectedDetailBooking, setSelectedDetailBooking] = useState<Buchung | null>(null);\r\n\r\n  const scrollViewRef = useRef<ScrollView>(null);\r\n  const navigation = useNavigation();\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const { data: zimmerData } = await supabase.from('zimmer').select('*');\r\n      if (zimmerData) setZimmer(zimmerData as Zimmer[]);\r\n      const { data: buchungenData } = await supabase.from('buchungen').select('*');\r\n      if (buchungenData) setBuchungen(buchungenData as Buchung[]);\r\n      const { data: gaesteData } = await supabase.from('gaeste').select('*');\r\n      if (gaesteData) setGaeste(gaesteData as Gast[]);\r\n    } catch (error) {\r\n      console.error('Fehler beim Laden der Daten:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setDaysArray(generateExtendedDaysArray());\r\n    fetchData();\r\n\r\n    // Alle 2 Minuten Daten abrufen\r\n    const interval = setInterval(fetchData, 120000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (daysArray.length > 0 && scrollViewRef.current) {\r\n      const today = new Date();\r\n      const indexOfToday = findDayIndex(today, daysArray);\r\n      if (indexOfToday !== -1) {\r\n        const offsetX = FIXED_WIDTH + indexOfToday * DAY_WIDTH;\r\n        if (Platform.OS === 'ios') {\r\n          setTimeout(() => {\r\n            scrollViewRef.current?.scrollTo({ x: offsetX, animated: false });\r\n          }, 100);\r\n        } else {\r\n          scrollViewRef.current?.scrollTo({ x: offsetX, animated: false });\r\n        }\r\n      }\r\n    }\r\n  }, [daysArray]);\r\n\r\n  const formatDate = (date: Date): string => {\r\n    const d = date.getDate().toString().padStart(2, '0');\r\n    const m = (date.getMonth() + 1).toString().padStart(2, '0');\r\n    const y = date.getFullYear();\r\n    return `${d}.${m}.${y}`;\r\n  };\r\n\r\n  const changeDate = (offset: number) => {\r\n    const newDate = new Date(selectedDate);\r\n    newDate.setDate(newDate.getDate() + offset);\r\n    setSelectedDate(newDate);\r\n  };\r\n\r\n  const openBookingDetails = (b: Buchung) => {\r\n    setSelectedDetailBooking(b);\r\n    setDetailModalVisible(true);\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    if (!searchQuery.trim()) return;\r\n    const lowerQuery = searchQuery.toLowerCase();\r\n    const matchingBooking = buchungen.find((b) => {\r\n      const guest = gaeste.find((g) => g.id === b.gast_id);\r\n      if (!guest) return false;\r\n      const fullName = (guest.vorname + ' ' + guest.nachname).toLowerCase();\r\n      return fullName.includes(lowerQuery);\r\n    });\r\n    if (matchingBooking) {\r\n      const checkInDate = new Date(matchingBooking.check_in);\r\n      const index = findDayIndex(checkInDate, daysArray);\r\n      if (index !== -1 && scrollViewRef.current) {\r\n        const offsetX = FIXED_WIDTH + index * DAY_WIDTH;\r\n        scrollViewRef.current.scrollTo({ x: offsetX, animated: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  const goToCalendar = () => {\r\n    navigation.navigate('Calendarscreen');\r\n  };\r\n  const goToAnzahlungen = () => {\r\n    navigation.navigate('AnzahlungenScreen');\r\n  };\r\n  const goToSettings = () => {\r\n    navigation.navigate('EinstellungenScreen');\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <Header />\r\n      <Text style={styles.title}>Tagesübersicht</Text>\r\n      <View style={styles.dateSelector}>\r\n        <Button title=\"‹\" onPress={() => changeDate(-1)} />\r\n        <Text style={styles.dateText}>{formatDate(selectedDate)}</Text>\r\n        <Button title=\"›\" onPress={() => changeDate(1)} />\r\n      </View>\r\n      <View style={styles.navigationButtons}>\r\n        <Button title=\"Zum Kalender\" onPress={goToCalendar} />\r\n        <Button title=\"Anzahlungen\" onPress={goToAnzahlungen} />\r\n        <Button title=\"Einstellungen\" onPress={goToSettings} />\r\n      </View>\r\n      <View style={styles.roomList}>\r\n        {zimmer.map((room) => (\r\n          <View key={room.id} style={styles.roomCard}>\r\n            <Text style={styles.roomTitle}>Zimmer {room.nummer}</Text>\r\n            {renderRoomStatus(room, selectedDate, buchungen, gaeste)}\r\n          </View>\r\n        ))}\r\n      </View>\r\n      <View style={styles.summary}>\r\n        <View style={styles.summaryBorder}>\r\n          <Text style={styles.summaryText}>\r\n            Frühstück (B&B):{' '}\r\n            {buchungen\r\n              .filter(\r\n                (b) =>\r\n                 (b.verpflegung === 'Frühstück' || b.verpflegung === 'Halbpension') &&\r\n                  new Date(b.check_in) <= selectedDate &&\r\n                  new Date(b.check_out) >= selectedDate\r\n              )\r\n              .reduce((sum, b) => sum + b.anzahl_personen, 0)}{' '}\r\n            P.\r\n          </Text>\r\n        </View>\r\n        <View style={styles.summaryBorder}>\r\n          <Text style={styles.summaryText}>\r\n            Halbpension (HP):{' '}\r\n            {buchungen\r\n              .filter(\r\n                (b) =>\r\n                  b.verpflegung === 'Halbpension' &&\r\n                  new Date(b.check_in) <= selectedDate &&\r\n                  new Date(b.check_out) >= selectedDate\r\n              )\r\n              .reduce((sum, b) => sum + b.anzahl_personen, 0)}{' '}\r\n            P.\r\n          </Text>\r\n        </View>\r\n        <View style={styles.summaryBorder}>\r\n          <Text style={styles.summaryText}>\r\n            Check-Ins:{' '}\r\n            {buchungen\r\n              .filter((b) => isSameDay(new Date(b.check_in), selectedDate))\r\n              .reduce((sum, b) => sum + b.anzahl_personen, 0)}{' '}\r\n            P.\r\n          </Text>\r\n          {buchungen\r\n            .filter((b) => isSameDay(new Date(b.check_in), selectedDate))\r\n            .map((b, idx) => {\r\n              const guest = gaeste.find((g) => g.id === b.gast_id);\r\n              const roomNum = zimmer.find((z) => z.id === b.zimmer_id)?.nummer || '';\r\n              return (\r\n                <TouchableOpacity key={`in-${idx}`} onPress={() => openBookingDetails(b)}>\r\n                  <Text style={styles.guestName}>\r\n                    Zimmer {roomNum} - {guest ? `${guest.vorname} ${guest.nachname}` : 'Unbekannt'}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              );\r\n            })}\r\n        </View>\r\n        <View style={styles.summaryBorder}>\r\n          <Text style={styles.summaryText}>\r\n            Check-Outs:{' '}\r\n            {buchungen\r\n              .filter((b) => isSameDay(new Date(b.check_out), selectedDate))\r\n              .reduce((sum, b) => sum + b.anzahl_personen, 0)}{' '}\r\n            P.\r\n          </Text>\r\n          {buchungen\r\n            .filter((b) => isSameDay(new Date(b.check_out), selectedDate))\r\n            .map((b, idx) => {\r\n              const guest = gaeste.find((g) => g.id === b.gast_id);\r\n              const roomNum = zimmer.find((z) => z.id === b.zimmer_id)?.nummer || '';\r\n              return (\r\n                <TouchableOpacity key={`out-${idx}`} onPress={() => openBookingDetails(b)}>\r\n                  <Text style={styles.guestName}>\r\n                    Zimmer {roomNum} - {guest ? `${guest.vorname} ${guest.nachname}` : 'Unbekannt'}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              );\r\n            })}\r\n        </View>\r\n        <View style={styles.summaryBorder}>\r\n          <Text style={styles.summaryText}>Anwesende Gäste:</Text>\r\n          {buchungen\r\n            .filter(\r\n              (b) =>\r\n                selectedDate > new Date(b.check_in) &&\r\n                selectedDate < new Date(b.check_out)\r\n            )\r\n            .map((b, idx) => {\r\n              const guest = gaeste.find((g) => g.id === b.gast_id);\r\n              const roomNum = zimmer.find((z) => z.id === b.zimmer_id)?.nummer || '';\r\n              return (\r\n                <TouchableOpacity key={`active-${idx}`} onPress={() => openBookingDetails(b)}>\r\n                  <Text style={styles.guestName}>\r\n                    Zimmer {roomNum} - {guest ? `${guest.vorname} ${guest.nachname}` : 'Unbekannt'}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              );\r\n            })}\r\n        </View>\r\n      </View>\r\n      {selectedDetailBooking && (\r\n        <Modal\r\n          isVisible={detailModalVisible}\r\n          onBackdropPress={() => setDetailModalVisible(false)}\r\n          useNativeDriver={false}\r\n          style={styles.customModalContainer}\r\n        >\r\n          <View style={styles.customModalOverlay}>\r\n            <View style={styles.customModalContent}>\r\n              <Text style={styles.modalTitle}>Buchungsdetails</Text>\r\n              <Text>\r\n                Zimmer:{' '}\r\n                {zimmer.find((z) => z.id === selectedDetailBooking.zimmer_id)?.nummer}\r\n              </Text>\r\n              <Text>Check-In: {selectedDetailBooking.check_in}</Text>\r\n              <Text>Check-Out: {selectedDetailBooking.check_out}</Text>\r\n              <Text>\r\n                Gast:{' '}\r\n                {(() => {\r\n                  const guest = gaeste.find((g) => g.id === selectedDetailBooking.gast_id);\r\n                  return guest ? `${guest.vorname} ${guest.nachname}` : 'Unbekannt';\r\n                })()}\r\n              </Text>\r\n              <Text>Personen: {selectedDetailBooking.anzahl_personen}</Text>\r\n              <Text>Status: {selectedDetailBooking.status}</Text>\r\n              <Text>\r\n                Verpflegung: {selectedDetailBooking.verpflegung || '-'}\r\n              </Text>\r\n              <Text>Anzahlung: {selectedDetailBooking.anzahlung}</Text>\r\n              <Text>\r\n                Preis pro Person: {selectedDetailBooking.preis_pro_person}\r\n              </Text>\r\n              <Text>Zusatz Preis: {selectedDetailBooking.zusatz_preis}</Text>\r\n              <Text>Tel.: / email: {selectedDetailBooking.tel_email}</Text>\r\n              <Text>Notiz: {selectedDetailBooking.notiz || '-'}</Text>\r\n              <Button title=\"Schließen\" onPress={() => setDetailModalVisible(false)} />\r\n            </View>\r\n          </View>\r\n        </Modal>\r\n      )}\r\n      <View style={styles.navFooter}>\r\n        <Button title=\"Zum Kalender\" onPress={goToCalendar} />\r\n        <Button title=\"Anzahlungen\" onPress={goToAnzahlungen} />\r\n        <Button title=\"Einstellungen\" onPress={goToSettings} />\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nfunction renderRoomStatus(\r\n  room: Zimmer,\r\n  selectedDate: Date,\r\n  buchungen: Buchung[],\r\n  gaeste: Gast[]\r\n) {\r\n  const roomBookings = buchungen.filter((b) => b.zimmer_id === room.id);\r\n  const currentBookings = roomBookings.filter((b) => {\r\n    const checkIn = new Date(b.check_in);\r\n    const checkOut = new Date(b.check_out);\r\n    return (\r\n      isSameDay(selectedDate, checkIn) ||\r\n      isSameDay(selectedDate, checkOut) ||\r\n      (selectedDate > checkIn && selectedDate < checkOut)\r\n    );\r\n  });\r\n\r\n  if (currentBookings.length === 0) {\r\n    return (\r\n      <View style={[styles.statusBar, { backgroundColor: \"#d3d3d3\" }]}>\r\n        <Text style={styles.statusBarText}>Frei</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.statusBarsContainer}>\r\n      {currentBookings.map((b) => {\r\n        const checkInDate = new Date(b.check_in);\r\n        const checkOutDate = new Date(b.check_out);\r\n        const guest = gaeste.find((g) => g.id === b.gast_id);\r\n        const guestLastName = guest ? guest.nachname : 'Unbekannt';\r\n        let verpflegungAbbr = '';\r\n        if (b.verpflegung) {\r\n          verpflegungAbbr =\r\n            b.verpflegung === 'Frühstück'\r\n              ? 'B&B'\r\n              : b.verpflegung === 'Halbpension'\r\n              ? 'HP'\r\n              : b.verpflegung;\r\n        }\r\n        let statusLabel = \"\";\r\n        let backgroundColor = \"\";\r\n        if (isSameDay(checkInDate, checkOutDate)) {\r\n          statusLabel = `Check-in/Check-out: ${guestLastName} (${b.anzahl_personen} P.) [${verpflegungAbbr}]`;\r\n          backgroundColor = \"#ADD8E6\";\r\n        } else if (isSameDay(selectedDate, checkInDate)) {\r\n          statusLabel = `Check-in: ${guestLastName} (${b.anzahl_personen} P.) [${verpflegungAbbr}]`;\r\n          backgroundColor = \"#ADD8E6\";\r\n        } else if (isSameDay(selectedDate, checkOutDate)) {\r\n          statusLabel = `Check-out: ${guestLastName} (${b.anzahl_personen} P.) [${verpflegungAbbr}]`;\r\n          backgroundColor = \"#FFDAB9\";\r\n        } else {\r\n          statusLabel = `belegt: ${guestLastName} (${b.anzahl_personen} P.) [${verpflegungAbbr}]`;\r\n          backgroundColor = \"#90EE90\";\r\n        }\r\n        return (\r\n          <View key={b.id} style={[styles.statusBar, { backgroundColor }]}>\r\n            <Text style={styles.statusBarText}>{statusLabel}</Text>\r\n          </View>\r\n        );\r\n      })}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n    backgroundColor: '#fff',\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  dateSelector: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  dateText: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n  },\r\n  navigationButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginBottom: 16,\r\n  },\r\n  roomList: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n  },\r\n  roomCard: {\r\n    width: '48%',\r\n    backgroundColor: '#f9f9f9',\r\n    padding: 8,\r\n    marginBottom: 16,\r\n    borderRadius: 4,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n  },\r\n  roomTitle: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n    marginBottom: 4,\r\n  },\r\n  statusText: {\r\n    fontSize: 14,\r\n  },\r\n  statusBar: {\r\n    padding: 4,\r\n    borderRadius: 4,\r\n    marginVertical: 2,\r\n  },\r\n  statusBarText: {\r\n    fontSize: 14,\r\n    color: '#000',\r\n  },\r\n  statusBarsContainer: {\r\n    flexDirection: 'column',\r\n  },\r\n  guestName: {\r\n    color: 'blue',\r\n    textDecorationLine: 'underline',\r\n    marginVertical: 2,\r\n  },\r\n  summary: {\r\n    marginVertical: 16,\r\n  },\r\n  summaryBorder: {\r\n    borderTopWidth: 1,\r\n    borderColor: '#ccc',\r\n    paddingVertical: 8,\r\n  },\r\n  summaryText: {\r\n    fontSize: 16,\r\n  },\r\n  customModalContainer: {\r\n    margin: 0,\r\n    justifyContent: 'center',\r\n  },\r\n  customModalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(0,0,0,0.5)',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 16,\r\n  },\r\n  customModalContent: {\r\n    backgroundColor: '#fff',\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    width: '85%',\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n    textAlign: 'center',\r\n  },\r\n  navFooter: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginTop: 16,\r\n  },\r\n});\r\n\r\nexport { isSameDay, findDayIndex };\r\nexport default HomeScreen;\r\n\r\n","import React, { useState, useEffect, useCallback, memo } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  Button,\r\n  Platform,\r\n  ScrollView,\r\n  Keyboard,\r\n  TouchableWithoutFeedback,\r\n  Alert,\r\n} from 'react-native';\r\nimport Modal from 'react-native-modal';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nfunction myAlert(title: string, msg: string) {\r\n  if (Platform.OS === 'web') {\r\n    window.alert(`${title}: ${msg}`);\r\n  } else {\r\n    Alert.alert(title, msg);\r\n  }\r\n}\r\n\r\ntype RadioGroupProps = {\r\n  options: { label: string; value: string }[];\r\n  selectedValue: string;\r\n  onChange: (value: string) => void;\r\n};\r\n\r\nconst RadioGroup: React.FC<RadioGroupProps> = memo(({ options, selectedValue, onChange }) => {\r\n  return (\r\n    <View style={styles.radioGroup}>\r\n      {options.map((opt) => {\r\n        const isSelected = opt.value === selectedValue;\r\n        return (\r\n          <TouchableWithoutFeedback key={opt.value} onPress={() => onChange(opt.value)}>\r\n            <View style={[styles.radioOption, isSelected && styles.radioOptionSelected]}>\r\n              <Text style={[styles.radioLabel, isSelected && styles.radioLabelSelected]}>\r\n                {opt.label}\r\n              </Text>\r\n            </View>\r\n          </TouchableWithoutFeedback>\r\n        );\r\n      })}\r\n    </View>\r\n  );\r\n});\r\n\r\ntype BookingFormModalProps = {\r\n  isVisible: boolean;\r\n  checkIn: string;\r\n  checkOut: string;\r\n  onClose: () => void;\r\n  onSubmit: (data: {\r\n    guestName: string;\r\n    personCount: number;\r\n    status: string;\r\n    anzahlung: number;\r\n    verpflegung: string;\r\n    preisProPerson: number | null;\r\n    hund: boolean;\r\n    zusatzPreis: string;\r\n    notiz: string;\r\n    tel_email: string;\r\n  }) => Promise<void>;\r\n  onRefresh?: () => Promise<void>;\r\n  initialGuestName?: string;\r\n  initialPersonCount?: number;\r\n  // Das Zimmer wurde bereits gewählt\r\n  selectedRoomId?: number;\r\n};\r\n\r\nconst statusOptions = [\r\n  { label: 'Belegt', value: 'belegt' },\r\n  { label: 'Anzahlung', value: 'anzahlung' },\r\n  { label: 'Anz. bez', value: 'anzahlung_bezahlt' },\r\n];\r\nconst verpflegungOptions = [\r\n  { label: 'Frühstück', value: 'Frühstück' },\r\n  { label: 'Halbpension', value: 'Halbpension' },\r\n];\r\nconst hundOptions = [\r\n  { label: 'Nein', value: 'nein' },\r\n  { label: 'Ja', value: 'ja' },\r\n];\r\n\r\nconst BookingFormModal: React.FC<BookingFormModalProps> = ({\r\n  isVisible,\r\n  checkIn,\r\n  checkOut,\r\n  onClose,\r\n  onSubmit,\r\n  onRefresh,\r\n  initialGuestName = '',\r\n  initialPersonCount = 0,\r\n  selectedRoomId,\r\n}) => {\r\n  const [guestName, setGuestName] = useState(initialGuestName);\r\n  const [personCount, setPersonCount] = useState(initialPersonCount.toString());\r\n  const [status, setStatus] = useState('belegt');\r\n  const [anzahlung, setAnzahlung] = useState('0');\r\n  const [verpflegung, setVerpflegung] = useState('Frühstück');\r\n  const [preisProPerson, setPreisProPerson] = useState('');\r\n  const [hund, setHund] = useState('nein');\r\n  const [zusatzPreis, setZusatzPreis] = useState('');\r\n  const [telEmail, setTelEmail] = useState('');\r\n  const [notiz, setNotiz] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Beim Öffnen des Modals initialisieren wir den Zustand\r\n  useEffect(() => {\r\n    if (isVisible) {\r\n      setGuestName(initialGuestName);\r\n      setPersonCount(initialPersonCount.toString());\r\n      setStatus('belegt');\r\n      setAnzahlung('0');\r\n      setVerpflegung('Frühstück');\r\n      setPreisProPerson('');\r\n      setHund('nein');\r\n      setZusatzPreis('');\r\n      setTelEmail('');\r\n      setNotiz('');\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [isVisible, initialGuestName, initialPersonCount]);\r\n\r\n  useEffect(() => {\r\n    if (anzahlung.trim() !== '' && anzahlung !== '0') {\r\n      setStatus('anzahlung');\r\n    }\r\n  }, [anzahlung]);\r\n\r\n  const isFormValid =\r\n    guestName.trim().split(' ').length >= 2 &&\r\n    !isNaN(parseInt(personCount)) &&\r\n    parseInt(personCount) > 0;\r\n\r\n  // Prüfen, ob das ausgewählte Zimmer im angegebenen Zeitraum verfügbar ist\r\n  const validateRoomAvailability = useCallback(\r\n    async (roomId: number, newCheckIn: string, newCheckOut: string): Promise<boolean> => {\r\n      const { data, error } = await supabase\r\n        .from('buchungen')\r\n        .select('id')\r\n        .eq('zimmer_id', roomId)\r\n        .is('deleted_at', null)\r\n        .filter('check_in', 'lt', newCheckOut)\r\n        .filter('check_out', 'gt', newCheckIn);\r\n      if (error) {\r\n        myAlert('Fehler', 'Fehler bei der Verfügbarkeitsprüfung.');\r\n        return false;\r\n      }\r\n      return data && data.length === 0;\r\n    },\r\n    []\r\n  );\r\n\r\n  const handleCreate = useCallback(async () => {\r\n    if (isSubmitting) return;\r\n    if (!selectedRoomId) {\r\n      myAlert('Fehler', 'Kein Zimmer ausgewählt.');\r\n      return;\r\n    }\r\n    const count = parseInt(personCount);\r\n    if (isNaN(count) || count <= 0) {\r\n      myAlert('Fehler', 'Bitte eine gültige Anzahl an Personen eingeben.');\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n      const parsedAnzahlung = parseFloat(anzahlung);\r\n      const parsedPreisProPerson = preisProPerson.trim() === '' ? null : parseFloat(preisProPerson);\r\n      const parsedZusatzPreis = zusatzPreis.trim();\r\n      console.log('Submitting booking with data:', {\r\n        guestName,\r\n        personCount: count,\r\n        status,\r\n        anzahlung: isNaN(parsedAnzahlung) ? 0 : parsedAnzahlung,\r\n        verpflegung,\r\n        preisProPerson: parsedPreisProPerson,\r\n        hund: hund === 'ja',\r\n        zusatzPreis: parsedZusatzPreis,\r\n        notiz,\r\n        tel_email: telEmail,\r\n      });\r\n\r\n      const nameParts = guestName.trim().split(' ');\r\n      if (nameParts.length < 2) {\r\n        myAlert('Fehler', 'Bitte Vor- und Nachname eingeben.');\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      let guestId: number | null = null;\r\n      const { data: existingGuest, error: existingGuestError } = await supabase\r\n        .from('gaeste')\r\n        .select('id')\r\n        .eq('vorname', nameParts[0])\r\n        .eq('nachname', nameParts[1]);\r\n      if (existingGuestError) {\r\n        console.log('Fehler bei der Gast-Suche', existingGuestError);\r\n      }\r\n      if (existingGuest && existingGuest.length > 0) {\r\n        guestId = existingGuest[0].id;\r\n      } else {\r\n        const { data: newGuest } = await supabase\r\n          .from('gaeste')\r\n          .insert([{ vorname: nameParts[0], nachname: nameParts[1] }])\r\n          .select('*')\r\n          .single();\r\n        if (!newGuest) {\r\n          myAlert('Fehler', 'Gast konnte nicht erstellt werden.');\r\n          setIsSubmitting(false);\r\n          return;\r\n        }\r\n        guestId = newGuest.id;\r\n      }\r\n\r\n      const available = await validateRoomAvailability(selectedRoomId, checkIn, checkOut);\r\n      if (!available) {\r\n        myAlert('Fehler', 'Das Zimmer ist im angegebenen Zeitraum bereits vergeben.');\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n\r\n      const { error } = await supabase.from('buchungen').insert([\r\n        {\r\n          zimmer_id: selectedRoomId,\r\n          gast_id: guestId,\r\n          check_in: checkIn,\r\n          check_out: checkOut,\r\n          anzahl_personen: count,\r\n          preis_pro_person: parsedPreisProPerson ?? 0,\r\n          anzahlung: isNaN(parsedAnzahlung) ? 0 : parsedAnzahlung,\r\n          status,\r\n          verpflegung,\r\n          hund: hund === 'ja',\r\n          zusatz_preis: parsedZusatzPreis,\r\n          tel_email: telEmail,\r\n          notiz,\r\n        },\r\n      ]);\r\n      if (error) {\r\n        myAlert('Fehler', error.message);\r\n      } else {\r\n        myAlert('Erfolg', 'Buchung erstellt!');\r\n        onClose();\r\n        if (onRefresh) await onRefresh();\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Fehler beim Erstellen der Buchung:', err);\r\n      myAlert('Fehler', err.message || 'Unbekannter Fehler beim Erstellen der Buchung.');\r\n    }\r\n    setIsSubmitting(false);\r\n  }, [\r\n    isSubmitting,\r\n    personCount,\r\n    anzahlung,\r\n    preisProPerson,\r\n    zusatzPreis,\r\n    guestName,\r\n    status,\r\n    verpflegung,\r\n    hund,\r\n    telEmail,\r\n    notiz,\r\n    checkIn,\r\n    checkOut,\r\n    selectedRoomId,\r\n    onClose,\r\n    onRefresh,\r\n    validateRoomAvailability,\r\n  ]);\r\n\r\n  const content = (\r\n    <ScrollView\r\n      contentContainerStyle={styles.scrollContainer}\r\n      keyboardShouldPersistTaps=\"handled\"\r\n      keyboardDismissMode=\"on-drag\"\r\n    >\r\n      <View style={styles.modalOverlay}>\r\n        <View style={styles.modalContent}>\r\n          <Text style={styles.modalTitle}>Neue Buchung</Text>\r\n          <Text>Check-In: {checkIn}</Text>\r\n          <Text>Check-Out: {checkOut}</Text>\r\n          <Text style={styles.label}>Gastname:</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Vorname Nachname\"\r\n            value={guestName}\r\n            onChangeText={setGuestName}\r\n            returnKeyType=\"done\"\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Personenanzahl:</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"z. B. 2\"\r\n            value={personCount}\r\n            onChangeText={setPersonCount}\r\n            keyboardType=\"numeric\"\r\n            returnKeyType=\"done\"\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Status:</Text>\r\n          <RadioGroup options={statusOptions} selectedValue={status} onChange={setStatus} />\r\n          <Text style={styles.label}>Anzahlung:</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"0\"\r\n            value={anzahlung}\r\n            onChangeText={setAnzahlung}\r\n            keyboardType=\"numeric\"\r\n            returnKeyType=\"done\"\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Verpflegung:</Text>\r\n          <RadioGroup options={verpflegungOptions} selectedValue={verpflegung} onChange={setVerpflegung} />\r\n          <Text style={styles.label}>Preis pro Person:</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"z. B. 50\"\r\n            value={preisProPerson}\r\n            onChangeText={setPreisProPerson}\r\n            keyboardType=\"numeric\"\r\n            returnKeyType=\"done\"\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Hund:</Text>\r\n          <RadioGroup options={hundOptions} selectedValue={hund} onChange={setHund} />\r\n          <Text style={styles.label}>Zusatz Preis:</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"z. B. 10\"\r\n            value={zusatzPreis}\r\n            onChangeText={setZusatzPreis}\r\n            returnKeyType=\"done\"\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Tel.: / email:</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Telefon oder Email\"\r\n            value={telEmail}\r\n            onChangeText={setTelEmail}\r\n            returnKeyType=\"done\"\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Notiz:</Text>\r\n          <TextInput\r\n            style={[styles.input, { height: 80 }]}\r\n            placeholder=\"Notiz\"\r\n            value={notiz}\r\n            onChangeText={setNotiz}\r\n            multiline\r\n            returnKeyType=\"done\"\r\n          />\r\n          <View style={styles.buttonRow}>\r\n            <Button title=\"Abbrechen\" onPress={onClose} />\r\n            {(checkIn.trim() !== '' && checkOut.trim() !== '') && (\r\n              <Button title=\"Buchung erstellen\" disabled={!isFormValid || isSubmitting} onPress={handleCreate} />\r\n            )}\r\n          </View>\r\n        </View>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      isVisible={isVisible}\r\n      onBackdropPress={onClose}\r\n      coverScreen\r\n      useNativeDriver={false}\r\n      style={styles.modalContainer}\r\n      propagateSwipe\r\n      avoidKeyboard\r\n    >\r\n      {Platform.OS === 'web' ? (\r\n        content\r\n      ) : (\r\n        <TouchableWithoutFeedback onPress={Keyboard.dismiss} accessible={false}>\r\n          {content}\r\n        </TouchableWithoutFeedback>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContainer: { margin: 0, justifyContent: 'flex-end' },\r\n  scrollContainer: { flexGrow: 1, justifyContent: 'center' },\r\n  modalOverlay: { flexGrow: 1, backgroundColor: 'rgba(0,0,0,0.5)', padding: 16, justifyContent: 'center' },\r\n  modalContent: { backgroundColor: '#fff', borderRadius: 8, padding: 16, width: '85%', alignSelf: 'center' },\r\n  modalTitle: { fontSize: 18, fontWeight: 'bold', marginBottom: 12, textAlign: 'center' },\r\n  label: { marginTop: 8, fontWeight: '600', marginBottom: 4, fontSize: 16 },\r\n  input: { height: 40, fontSize: 16, paddingVertical: 8, paddingHorizontal: 10, borderWidth: 1, borderColor: '#ccc', borderRadius: 4, color: 'black', marginBottom: 12 },\r\n  radioGroup: { flexDirection: 'row', marginBottom: 12 },\r\n  radioOption: { paddingVertical: 4, paddingHorizontal: 8, borderWidth: 1, borderColor: '#ccc', borderRadius: 4, marginRight: 8 },\r\n  radioOptionSelected: { backgroundColor: '#007AFF', borderColor: '#007AFF' },\r\n  radioLabel: { fontSize: 16, color: 'black' },\r\n  radioLabelSelected: { color: '#fff' },\r\n  buttonRow: { flexDirection: 'row', justifyContent: 'space-around', marginTop: 12 },\r\n});\r\n\r\nexport default memo(BookingFormModal);\r\n","import React, { useState, useEffect, useCallback, memo } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  Button,\r\n  Platform,\r\n  ScrollView,\r\n  Keyboard,\r\n  TouchableWithoutFeedback,\r\n  Alert,\r\n} from 'react-native';\r\nimport Modal from 'react-native-modal';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nexport type BookingData = {\r\n  id: number;\r\n  zimmer_id: number;\r\n  guestName: string;\r\n  personCount: number;\r\n  checkIn: string;\r\n  checkOut: string;\r\n  status: string;\r\n  anzahlung: number;\r\n  verpflegung: string;\r\n  preisProPerson: number | null;\r\n  hund: boolean;\r\n  zusatz_preis: string;\r\n  tel_email: string;\r\n  zimmerNumber: string;\r\n  notiz?: string;\r\n};\r\n\r\ntype BookingEditModalProps = {\r\n  isVisible: boolean;\r\n  booking: BookingData;\r\n  onClose: () => void;\r\n  onUpdate: (updatedBooking: BookingData) => Promise<void>;\r\n  onDelete: (bookingId: number) => Promise<void>;\r\n  onRefresh?: () => void;\r\n};\r\n\r\nfunction myAlert(title: string, msg: string) {\r\n  if (Platform.OS === 'web') {\r\n    window.alert(`${title}: ${msg}`);\r\n  } else {\r\n    Alert.alert(title, msg);\r\n  }\r\n}\r\n\r\nasync function myConfirm(question: string): Promise<boolean> {\r\n  if (Platform.OS === 'web') {\r\n    return Promise.resolve(window.confirm(question));\r\n  } else {\r\n    return new Promise<boolean>((resolve) => {\r\n      Alert.alert(\r\n        'Bestätigung',\r\n        question,\r\n        [\r\n          { text: 'Abbrechen', style: 'cancel', onPress: () => resolve(false) },\r\n          { text: 'OK', style: 'default', onPress: () => resolve(true) },\r\n        ],\r\n        { cancelable: true }\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nconst RadioGroup: React.FC<{\r\n  options: { label: string; value: string }[];\r\n  selectedValue: string;\r\n  onChange: (value: string) => void;\r\n}> = memo(({ options, selectedValue, onChange }) => {\r\n  return (\r\n    <View style={styles.radioGroup}>\r\n      {options.map((opt) => {\r\n        const isSelected = opt.value === selectedValue;\r\n        return (\r\n          <TouchableWithoutFeedback key={opt.value} onPress={() => onChange(opt.value)}>\r\n            <View style={[styles.radioOption, isSelected && styles.radioOptionSelected]}>\r\n              <Text style={[styles.radioLabel, isSelected && styles.radioLabelSelected]}>\r\n                {opt.label}\r\n              </Text>\r\n            </View>\r\n          </TouchableWithoutFeedback>\r\n        );\r\n      })}\r\n    </View>\r\n  );\r\n});\r\n\r\nconst sharedInputStyle = {\r\n  height: 40,\r\n  fontSize: 16,\r\n  paddingVertical: 8,\r\n  paddingHorizontal: 10,\r\n  borderWidth: 1,\r\n  borderColor: '#ccc',\r\n  borderRadius: 4,\r\n  color: 'black',\r\n  marginBottom: 12,\r\n  width: '100%',\r\n};\r\n\r\nconst BookingEditModal: React.FC<BookingEditModalProps> = ({\r\n  isVisible,\r\n  booking,\r\n  onClose,\r\n  onUpdate,\r\n  onDelete,\r\n  onRefresh,\r\n}) => {\r\n  const [guestName, setGuestName] = useState(booking.guestName);\r\n  const [personCount, setPersonCount] = useState(booking.personCount.toString());\r\n  const [status, setStatus] = useState(booking.status);\r\n  const [anzahlung, setAnzahlung] = useState(booking.anzahlung.toString());\r\n  const [verpflegung, setVerpflegung] = useState(booking.verpflegung || 'Frühstück');\r\n  const [preisProPerson, setPreisProPerson] = useState(\r\n    booking.preisProPerson !== null ? booking.preisProPerson.toString() : ''\r\n  );\r\n  const [hund, setHund] = useState(booking.hund ? 'ja' : 'nein');\r\n  const [zusatzPreis, setZusatzPreis] = useState(booking.zusatz_preis);\r\n  const [telEmail, setTelEmail] = useState(booking.tel_email);\r\n  const [zimmerNumber, setzimmerNumber] = useState(booking.zimmerNumber);\r\n  const [checkIn, setCheckIn] = useState(booking.checkIn);\r\n  const [checkOut, setCheckOut] = useState(booking.checkOut);\r\n  const [notiz, setNotiz] = useState(booking.notiz || '');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setGuestName(booking.guestName);\r\n    setPersonCount(booking.personCount.toString());\r\n    setStatus(booking.status);\r\n    setAnzahlung(booking.anzahlung.toString());\r\n    setVerpflegung(booking.verpflegung || 'Frühstück');\r\n    setPreisProPerson(booking.preisProPerson !== null ? booking.preisProPerson.toString() : '');\r\n    setHund(booking.hund ? 'ja' : 'nein');\r\n    setZusatzPreis(booking.zusatz_preis);\r\n    setTelEmail(booking.tel_email);\r\n    setzimmerNumber(booking.zimmerNumber);\r\n    setCheckIn(booking.checkIn);\r\n    setCheckOut(booking.checkOut);\r\n    setNotiz(booking.notiz || '');\r\n    setIsSubmitting(false);\r\n  }, [booking]);\r\n\r\n  const isFormValid =\r\n    guestName.trim().split(' ').length >= 2 &&\r\n    !isNaN(parseInt(personCount)) &&\r\n    parseInt(personCount) > 0 &&\r\n    checkIn.trim() !== '' &&\r\n    checkOut.trim() !== '' &&\r\n    zimmerNumber.trim() !== '';\r\n\r\n  const handleUpdate = useCallback(async () => {\r\n    if (isSubmitting) return;\r\n    const count = parseInt(personCount);\r\n    if (isNaN(count) || count <= 0) {\r\n      myAlert('Fehler', 'Bitte eine gültige Anzahl an Personen eingeben.');\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    const parsedAnzahlung = parseFloat(anzahlung);\r\n    const parsedPreisProPerson = preisProPerson.trim() === '' ? null : parseFloat(preisProPerson);\r\n    const newzimmerNumber = zimmerNumber.trim();\r\n    if (!newzimmerNumber) {\r\n      myAlert('Fehler', 'Bitte eine Zimmernummer angeben.');\r\n      setIsSubmitting(false);\r\n      return;\r\n    }\r\n    // Hier nehmen wir an, dass die Zimmernummer bereits korrekt ist.\r\n    const { error } = await supabase\r\n      .from('buchungen')\r\n      .update({\r\n        check_in: checkIn,\r\n        check_out: checkOut,\r\n        anzahl_personen: count,\r\n        preis_pro_person: parsedPreisProPerson ?? 0,\r\n        anzahlung: isNaN(parsedAnzahlung) ? 0 : parsedAnzahlung,\r\n        status: status,\r\n        verpflegung: verpflegung,\r\n        hund: hund === 'ja',\r\n        zusatz_preis: zusatzPreis,\r\n        tel_email: telEmail,\r\n        notiz,\r\n      })\r\n      .eq('id', booking.id);\r\n    if (error) {\r\n      myAlert('Fehler', error.message);\r\n    } else {\r\n      myAlert('Erfolg', 'Buchung aktualisiert!');\r\n      if (onRefresh) await onRefresh();\r\n      onClose();\r\n    }\r\n    setIsSubmitting(false);\r\n  }, [\r\n    isSubmitting,\r\n    personCount,\r\n    anzahlung,\r\n    preisProPerson,\r\n    zimmerNumber,\r\n    checkIn,\r\n    checkOut,\r\n    status,\r\n    verpflegung,\r\n    hund,\r\n    zusatzPreis,\r\n    telEmail,\r\n    notiz,\r\n    booking.id,\r\n    onRefresh,\r\n    onClose,\r\n  ]);\r\n\r\n  const handleDelete = useCallback(async () => {\r\n    if (isSubmitting) return;\r\n    const confirmed = await myConfirm('Möchtest du die Buchung wirklich löschen?');\r\n    if (confirmed) {\r\n      setIsSubmitting(true);\r\n      // Soft Delete: Setze deleted_at statt der Buchung endgültig zu löschen.\r\n      const { error } = await supabase\r\n        .from('buchungen')\r\n        .update({ deleted_at: new Date().toISOString() })\r\n        .eq('id', booking.id);\r\n      if (error) {\r\n        myAlert('Fehler', error.message);\r\n      } else {\r\n        myAlert('Erfolg', 'Buchung wurde soft-deleted!');\r\n        if (onRefresh) await onRefresh();\r\n        onClose();\r\n      }\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [isSubmitting, booking.id, onRefresh, onClose]);\r\n\r\n  const content = (\r\n    <ScrollView\r\n      contentContainerStyle={styles.scrollContainer}\r\n      keyboardShouldPersistTaps=\"handled\"\r\n      keyboardDismissMode=\"on-drag\"\r\n    >\r\n      <View style={styles.modalOverlay}>\r\n        <View style={styles.modalContent}>\r\n          <Text style={styles.modalTitle}>Buchung bearbeiten</Text>\r\n          <Text>Aktueller Check-In: {booking.checkIn}</Text>\r\n          <Text>Aktueller Check-Out: {booking.checkOut}</Text>\r\n          <Text style={styles.label}>Zimmernummer:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"z. B. 101\"\r\n            value={zimmerNumber}\r\n            onChangeText={setzimmerNumber}\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Neuer Check-In:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"YYYY-MM-DD\"\r\n            value={checkIn}\r\n            onChangeText={setCheckIn}\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Neuer Check-Out:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"YYYY-MM-DD\"\r\n            value={checkOut}\r\n            onChangeText={setCheckOut}\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Gastname:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"Vorname Nachname\"\r\n            value={guestName}\r\n            onChangeText={setGuestName}\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Anzahl Personen:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"z. B. 2\"\r\n            value={personCount}\r\n            onChangeText={setPersonCount}\r\n            keyboardType=\"numeric\"\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Status:</Text>\r\n          <RadioGroup\r\n            options={[\r\n              { label: 'Belegt', value: 'belegt' },\r\n              { label: 'Anzahlung', value: 'anzahlung' },\r\n              { label: 'Anz. bez', value: 'anzahlung_bezahlt' },\r\n            ]}\r\n            selectedValue={status}\r\n            onChange={setStatus}\r\n          />\r\n          <Text style={styles.label}>Anzahlung:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"0\"\r\n            value={anzahlung}\r\n            onChangeText={setAnzahlung}\r\n            keyboardType=\"numeric\"\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Verpflegung:</Text>\r\n          <RadioGroup\r\n            options={[\r\n              { label: 'Frühstück', value: 'Frühstück' },\r\n              { label: 'Halbpension', value: 'Halbpension' },\r\n            ]}\r\n            selectedValue={verpflegung}\r\n            onChange={setVerpflegung}\r\n          />\r\n          <Text style={styles.label}>Preis pro Person:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"z. B. 50\"\r\n            value={preisProPerson}\r\n            onChangeText={setPreisProPerson}\r\n            keyboardType=\"numeric\"\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Hund:</Text>\r\n          <RadioGroup\r\n            options={[\r\n              { label: 'Nein', value: 'nein' },\r\n              { label: 'Ja', value: 'ja' },\r\n            ]}\r\n            selectedValue={hund}\r\n            onChange={setHund}\r\n          />\r\n          <Text style={styles.label}>Zusatz Preis:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"z. B. 10\"\r\n            value={zusatzPreis}\r\n            onChangeText={setZusatzPreis}\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Tel.: / email:</Text>\r\n          <TextInput\r\n            style={sharedInputStyle}\r\n            placeholder=\"Telefon oder Email\"\r\n            value={telEmail}\r\n            onChangeText={setTelEmail}\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <Text style={styles.label}>Notiz:</Text>\r\n          <TextInput\r\n            style={[sharedInputStyle, { height: 80 }]}\r\n            placeholder=\"Notiz\"\r\n            value={notiz}\r\n            onChangeText={setNotiz}\r\n            multiline\r\n            blurOnSubmit\r\n            onSubmitEditing={Keyboard.dismiss}\r\n          />\r\n          <View style={styles.buttonRow}>\r\n            <Button title=\"Aktualisieren\" disabled={!isFormValid || isSubmitting} onPress={handleUpdate} />\r\n            <Button title=\"Löschen\" color=\"red\" onPress={handleDelete} disabled={isSubmitting} />\r\n          </View>\r\n          <View style={styles.modalButtons}>\r\n            <Button title=\"Schließen\" onPress={onClose} disabled={isSubmitting} />\r\n          </View>\r\n        </View>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      isVisible={isVisible}\r\n      onBackdropPress={onClose}\r\n      coverScreen\r\n      useNativeDriver={false}\r\n      style={styles.modalContainer}\r\n      propagateSwipe\r\n      avoidKeyboard\r\n    >\r\n      {Platform.OS === 'web' ? (\r\n        content\r\n      ) : (\r\n        <TouchableWithoutFeedback onPress={Keyboard.dismiss} accessible={false}>\r\n          {content}\r\n        </TouchableWithoutFeedback>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContainer: { margin: 0, justifyContent: 'flex-end' },\r\n  scrollContainer: { flexGrow: 1, justifyContent: 'center' },\r\n  modalOverlay: { flexGrow: 1, backgroundColor: 'rgba(0,0,0,0.5)', padding: 16, justifyContent: 'center' },\r\n  modalContent: { backgroundColor: '#fff', borderRadius: 8, padding: 16, width: '85%', alignSelf: 'center' },\r\n  modalTitle: { fontSize: 18, fontWeight: 'bold', marginBottom: 12, textAlign: 'center' },\r\n  label: { marginTop: 8, fontWeight: '600', marginBottom: 4, fontSize: 16 },\r\n  radioGroup: { flexDirection: 'row', marginBottom: 12 },\r\n  radioOption: { paddingVertical: 4, paddingHorizontal: 8, borderWidth: 1, borderColor: '#ccc', borderRadius: 4, marginRight: 8 },\r\n  radioOptionSelected: { backgroundColor: '#007AFF', borderColor: '#007AFF' },\r\n  radioLabel: { fontSize: 16, color: 'black' },\r\n  radioLabelSelected: { color: '#fff' },\r\n  buttonRow: { flexDirection: 'row', justifyContent: 'space-around', marginTop: 12 },\r\n  modalButtons: { marginTop: 12, alignItems: 'center' },\r\n});\r\n\r\nexport default memo(BookingEditModal);\r\n","import React, { useEffect, useMemo, useState, useRef, useCallback } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Button,\r\n  Alert,\r\n  Dimensions,\r\n} from 'react-native';\r\nimport { supabase } from '../supabaseClient';\r\nimport BookingFormModal from '../components/BookingFormModal';\r\nimport BookingEditModal, { BookingData } from '../components/BookingEditModal';\r\nimport Header from '../components/Header';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\n\r\n// --- TYPEN ---\r\ntype Zimmer = {\r\n  id: number;\r\n  nummer: string;\r\n  status: string;\r\n  created_at: string;\r\n};\r\n\r\nexport type Buchung = {\r\n  id: number;\r\n  zimmer_id: number;\r\n  gast_id: number | null;\r\n  check_in: string;\r\n  check_out: string;\r\n  anzahl_personen: number;\r\n  preis_pro_person: number;\r\n  anzahlung: number;\r\n  status: string;\r\n  verpflegung: string | null;\r\n  hund: boolean | null;\r\n  zusatz_preis: string;\r\n  tel_email: string;\r\n  notiz?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  deleted_at?: string; // Soft Delete-Feld\r\n};\r\n\r\ntype Gast = {\r\n  id: number;\r\n  vorname: string;\r\n  nachname: string;\r\n};\r\n\r\nexport type Data = {\r\n  date: Date;\r\n  dayNumber: string;\r\n  monthYear: string;\r\n};\r\n\r\nexport type DayCellData = {\r\n  date: Date;\r\n  dayNumber: string;\r\n  monthYear: string;\r\n};\r\n\r\n// --- STYLES-KONSTANTEN ---\r\nconst DAY_WIDTH = 60;\r\nconst FIXED_WIDTH = 80;\r\nconst ROW_HEIGHT = 35;\r\n\r\n// Bildschirmdimensionen\r\nconst { width: screenWidth } = Dimensions.get('window');\r\nconst isSmallScreen = screenWidth < 400;\r\n\r\n// --- HILFSFUNKTIONEN ---\r\nfunction parseDate(dateStr: string): Date {\r\n  return dateStr.includes('T') ? new Date(dateStr) : new Date(dateStr + 'T00:00:00');\r\n}\r\n\r\nfunction isSameDay(d1: Date, d2: Date): boolean {\r\n  return (\r\n    d1.getFullYear() === d2.getFullYear() &&\r\n    d1.getMonth() === d2.getMonth() &&\r\n    d1.getDate() === d2.getDate()\r\n  );\r\n}\r\n\r\nfunction findDayIndex(date: Date, days: DayCellData[]): number {\r\n  return days.findIndex((d) => isSameDay(d.date, date));\r\n}\r\n\r\nfunction formatDayCellData(date: Date): DayCellData {\r\n  const dayNumber = date.getDate().toString().padStart(2, '0');\r\n  const monthYear = date\r\n    .toLocaleDateString('de-DE', { month: '2-digit', year: 'numeric' })\r\n    .replace('.', '/');\r\n  return { date: new Date(date), dayNumber, monthYear };\r\n}\r\n\r\nfunction generateDaysArray(pastDays: number, futureMonths: number): DayCellData[] {\r\n  const startDate = new Date();\r\n  startDate.setDate(startDate.getDate() - pastDays);\r\n  const endDate = new Date();\r\n  endDate.setMonth(endDate.getMonth() + futureMonths);\r\n  const result: DayCellData[] = [];\r\n  let current = new Date(startDate);\r\n  while (current <= endDate) {\r\n    result.push(formatDayCellData(current));\r\n    current.setDate(current.getDate() + 1);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction isIntervalAvailableForzimmer(\r\n  zimmerId: number | null,\r\n  start: Date,\r\n  end: Date,\r\n  bookings: Buchung[]\r\n): boolean {\r\n  if (!zimmerId) return false;\r\n  if (start.getTime() === end.getTime()) return true;\r\n  for (const booking of bookings) {\r\n    if (booking.zimmer_id !== zimmerId) continue;\r\n    const bookingStart = parseDate(booking.check_in);\r\n    const bookingEnd = parseDate(booking.check_out);\r\n    if (start < bookingEnd && end > bookingStart) {\r\n      if (end.getTime() === bookingStart.getTime() || start.getTime() === bookingEnd.getTime()) {\r\n        continue;\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction getBuchungForDay(dayData: DayCellData, zimmerId: number, buchungen: Buchung[]): Buchung | null {\r\n  return (\r\n    buchungen.find((b) => {\r\n      if (b.zimmer_id !== zimmerId) return false;\r\n      const start = parseDate(b.check_in);\r\n      const end = parseDate(b.check_out);\r\n      return dayData.date >= start && dayData.date <= end;\r\n    }) || null\r\n  );\r\n}\r\n\r\n// --- DayCell-Komponente ---\r\ntype DayCellProps = {\r\n  day: DayCellData;\r\n  isSelected: boolean;\r\n  existingBooking: Buchung | null;\r\n  onPress: () => void;\r\n};\r\n\r\nconst DayCell = React.memo<DayCellProps>(({ day, isSelected, existingBooking, onPress }) => {\r\n  return (\r\n    <TouchableOpacity\r\n      style={[\r\n        styles.dayCell,\r\n        { width: DAY_WIDTH, height: ROW_HEIGHT },\r\n        existingBooking && { backgroundColor: 'transparent' },\r\n        isSelected && styles.selectedDayCell,\r\n      ]}\r\n      onPress={onPress}\r\n    >\r\n      <Text style={styles.dayCellText}>{day.dayNumber}</Text>\r\n    </TouchableOpacity>\r\n  );\r\n});\r\n\r\n// --- BookingBlockRow-Komponente ---\r\ntype BookingBlockRowProps = {\r\n  zimmer: Zimmer;\r\n  bookings: Buchung[];\r\n  daysArray: DayCellData[];\r\n  gaeste: Gast[];\r\n  onPressBooking: (b: Buchung) => void;\r\n  highlightedBookingId?: number | null;\r\n};\r\n\r\nconst BookingBlockRow = React.memo((props: BookingBlockRowProps) => {\r\n  const { zimmer, bookings, daysArray, gaeste, onPressBooking, highlightedBookingId } = props;\r\n  return (\r\n    <View style={styles.overlayContainer}>\r\n      {bookings.map((b) => {\r\n        const startDate = parseDate(b.check_in);\r\n        const endDate = parseDate(b.check_out);\r\n        const startIndex = findDayIndex(startDate, daysArray);\r\n        const endIndex = findDayIndex(endDate, daysArray);\r\n        if (startIndex < 0 || endIndex < 0) return null;\r\n        let blockLeft = startIndex * DAY_WIDTH;\r\n        let blockWidth = (endIndex - startIndex + 1) * DAY_WIDTH;\r\n        if (startIndex === endIndex) {\r\n          blockLeft += DAY_WIDTH / 2;\r\n          blockWidth = DAY_WIDTH / 2;\r\n        } else {\r\n          blockLeft += DAY_WIDTH / 2;\r\n          blockWidth -= DAY_WIDTH;\r\n        }\r\n        const guest = gaeste.find((g) => g.id === b.gast_id);\r\n        const guestName = guest ? `${guest.vorname} ${guest.nachname}` : 'Unbekannt';\r\n        let verpflegungAbbr = '';\r\n        if (b.verpflegung === 'Frühstück') verpflegungAbbr = 'B&B';\r\n        else if (b.verpflegung === 'Halbpension') verpflegungAbbr = 'HP';\r\n        else if (b.verpflegung) verpflegungAbbr = b.verpflegung;\r\n        const label = `${guestName} (${b.anzahl_personen}P) ${verpflegungAbbr}`;\r\n        let blockColor = '#ccffcc';\r\n        if (b.status === 'belegt') blockColor = '#ffcccc';\r\n        else if (b.status === 'anzahlung') blockColor = '#ffffcc';\r\n        else if (b.status === 'booking') blockColor = '#ccccff';\r\n        return (\r\n          <TouchableOpacity key={b.id} activeOpacity={0.8} onPress={() => onPressBooking(b)}>\r\n            <View\r\n              style={[\r\n                styles.bookingBlock,\r\n                { left: blockLeft, width: blockWidth, backgroundColor: blockColor },\r\n                highlightedBookingId === b.id && { borderWidth: 3, borderColor: 'black' },\r\n              ]}\r\n            >\r\n              <Text style={styles.bookingBlockText} numberOfLines={2}>\r\n                {label}\r\n              </Text>\r\n            </View>\r\n          </TouchableOpacity>\r\n        );\r\n      })}\r\n    </View>\r\n  );\r\n});\r\n\r\n// --- Hauptkomponente ---\r\nexport default function CalendarScreen1({ buchungen, onRefresh }: { buchungen: Buchung[]; onRefresh: () => void; }) {\r\n  const [localBuchungen, setLocalBuchungen] = useState<Buchung[]>([]);\r\n  const [pastDays, setPastDays] = useState(10);\r\n  const [futureMonths, setFutureMonths] = useState(6);\r\n  const [zimmer, setZimmer] = useState<Zimmer[]>([]);\r\n  const [gaeste, setGaeste] = useState<Gast[]>([]);\r\n  const [selectedCheckIn, setSelectedCheckIn] = useState<DayCellData | null>(null);\r\n  const [selectedCheckOut, setSelectedCheckOut] = useState<DayCellData | null>(null);\r\n  const [selectedzimmerId, setSelectedzimmerId] = useState<number | null>(null);\r\n  const [highlightedBookingId, setHighlightedBookingId] = useState<number | null>(null);\r\n  const [currentSearchIndex, setCurrentSearchIndex] = useState(0);\r\n  const [isBookingModalVisible, setBookingModalVisible] = useState(false);\r\n  const [isBookingEditModalVisible, setBookingEditModalVisible] = useState(false);\r\n  const [selectedBooking, setSelectedBooking] = useState<BookingData | null>(null);\r\n  const [guestInput, setGuestInput] = useState('');\r\n  const [personCountInput, setPersonCountInput] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [displayedDate, setDisplayedDate] = useState(new Date());\r\n  const scrollViewRef = useRef<ScrollView>(null);\r\n  const lastRefreshTimeRef = useRef<number>(0);\r\n  const monthAbbreviations = ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'];\r\n  const daysArray = useMemo(() => generateDaysArray(pastDays, futureMonths), [pastDays, futureMonths]);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    try {\r\n      const { data: zimmerData } = await supabase.from('zimmer').select('*');\r\n      if (zimmerData) setZimmer(zimmerData as Zimmer[]);\r\n      const { data: gaesteData } = await supabase.from('gaeste').select('*');\r\n      if (gaesteData) setGaeste(gaesteData as Gast[]);\r\n    } catch (error) {\r\n      console.error('Fehler beim Laden von Zimmern/Gästen:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(fetchData, 120000);\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchData]);\r\n\r\n  useEffect(() => {\r\n    setLocalBuchungen(buchungen);\r\n  }, [buchungen]);\r\n\r\n  useFocusEffect(\r\n    useCallback(() => {\r\n      const now = Date.now();\r\n      if (now - lastRefreshTimeRef.current > 30000) {\r\n        onRefresh();\r\n        lastRefreshTimeRef.current = now;\r\n      }\r\n    }, [onRefresh])\r\n  );\r\n\r\n  const handleScroll = useCallback((event: any) => {\r\n    const xOffset = event.nativeEvent.contentOffset.x;\r\n    const visibleWidth = event.nativeEvent.layoutMeasurement.width;\r\n    const centerX = xOffset + visibleWidth / 2;\r\n    const index = Math.floor(centerX / DAY_WIDTH);\r\n    if (index >= 0 && index < daysArray.length) {\r\n      const newDate = daysArray[index].date;\r\n      if (\r\n        newDate.getMonth() !== displayedDate.getMonth() ||\r\n        newDate.getFullYear() !== displayedDate.getFullYear()\r\n      ) {\r\n        setDisplayedDate(newDate);\r\n      }\r\n    }\r\n  }, [daysArray, displayedDate]);\r\n\r\n  const scrollToMonth = useCallback((targetDate: Date) => {\r\n    if (daysArray.length === 0 || !scrollViewRef.current) return;\r\n    const targetIndex = daysArray.findIndex(\r\n      (d) =>\r\n        d.date.getFullYear() === targetDate.getFullYear() &&\r\n        d.date.getMonth() === targetDate.getMonth()\r\n    );\r\n    if (targetIndex !== -1) {\r\n      const offsetX = FIXED_WIDTH + targetIndex * DAY_WIDTH;\r\n      scrollViewRef.current.scrollTo({ x: offsetX, animated: true });\r\n    }\r\n  }, [daysArray]);\r\n\r\n  const handleMonthButtonPress = useCallback((monthIndex: number) => {\r\n    const currentYear = displayedDate.getFullYear();\r\n    const newDate = new Date(currentYear, monthIndex, 1);\r\n    setDisplayedDate(newDate);\r\n    scrollToMonth(newDate);\r\n  }, [displayedDate, scrollToMonth]);\r\n\r\n  const addBackwardExtension = useCallback(() => setPastDays(prev => prev + 90), []);\r\n  const addForwardExtension = useCallback(() => setFutureMonths(prev => prev + 3), []);\r\n\r\n  const handleDayPress = useCallback((day: DayCellData, zimmerId: number) => {\r\n    if (!selectedCheckIn) {\r\n      if (!isIntervalAvailableForzimmer(zimmerId, day.date, day.date, localBuchungen)) return;\r\n      setSelectedzimmerId(zimmerId);\r\n      setSelectedCheckIn(day);\r\n      setSelectedCheckOut(day);\r\n      return;\r\n    }\r\n    if (selectedzimmerId !== zimmerId) {\r\n      if (!isIntervalAvailableForzimmer(zimmerId, day.date, day.date, localBuchungen)) return;\r\n      setSelectedzimmerId(zimmerId);\r\n      setSelectedCheckIn(day);\r\n      setSelectedCheckOut(day);\r\n      return;\r\n    }\r\n    if (isSameDay(day.date, selectedCheckIn.date)) {\r\n      setSelectedCheckOut(day);\r\n      return;\r\n    }\r\n    if (day.date >= selectedCheckIn.date) {\r\n      const isAvailable = isIntervalAvailableForzimmer(zimmerId, selectedCheckIn.date, day.date, localBuchungen);\r\n      const bookingAtDay = getBuchungForDay(day, zimmerId, localBuchungen);\r\n      if (isAvailable || (bookingAtDay && isSameDay(day.date, parseDate(bookingAtDay.check_in)))) {\r\n        setSelectedCheckOut(day);\r\n        return;\r\n      } else {\r\n        Alert.alert(\"Das Intervall ist nicht verfügbar.\");\r\n        return;\r\n      }\r\n    }\r\n    setSelectedCheckIn(day);\r\n    setSelectedCheckOut(day);\r\n  }, [selectedCheckIn, localBuchungen, selectedzimmerId]);\r\n\r\n  const handleSearch = useCallback(() => {\r\n    if (!searchQuery.trim()) return;\r\n    const lowerQuery = searchQuery.toLowerCase();\r\n    const matches = localBuchungen\r\n      .filter((b) => {\r\n        const guest = gaeste.find((g) => g.id === b.gast_id);\r\n        if (!guest) return false;\r\n        const fullName = `${guest.vorname} ${guest.nachname}`.toLowerCase();\r\n        return fullName.includes(lowerQuery);\r\n      })\r\n      .map((b) => b.id);\r\n    if (matches.length > 0) {\r\n      const index = currentSearchIndex % matches.length;\r\n      const bookingId = matches[index];\r\n      setHighlightedBookingId(bookingId);\r\n      setCurrentSearchIndex(currentSearchIndex + 1);\r\n      const matchingBooking = localBuchungen.find(b => b.id === bookingId);\r\n      if (matchingBooking) {\r\n        const checkInDate = parseDate(matchingBooking.check_in);\r\n        const dayIndex = findDayIndex(checkInDate, daysArray);\r\n        if (dayIndex !== -1 && scrollViewRef.current) {\r\n          const offsetX = FIXED_WIDTH + dayIndex * DAY_WIDTH;\r\n          scrollViewRef.current.scrollTo({ x: offsetX, animated: true });\r\n        }\r\n      }\r\n    } else {\r\n      setHighlightedBookingId(null);\r\n      setCurrentSearchIndex(0);\r\n    }\r\n  }, [searchQuery, localBuchungen, gaeste, daysArray, currentSearchIndex]);\r\n\r\n  const openBookingModal = useCallback(() => {\r\n    if (!selectedCheckIn || !selectedCheckOut || selectedzimmerId === null) {\r\n      Alert.alert('Bitte Check‑In und Check‑Out auswählen.');\r\n      return;\r\n    }\r\n    if (!isSameDay(selectedCheckIn.date, selectedCheckOut.date)) {\r\n      setBookingModalVisible(true);\r\n    } else {\r\n      Alert.alert('Bitte wählen Sie unterschiedliche Tage für Check‑In und Check‑Out aus.');\r\n    }\r\n  }, [selectedCheckIn, selectedCheckOut, selectedzimmerId]);\r\n\r\n  const handleBookingPress = useCallback((b: Buchung) => {\r\n    const guest = gaeste.find((g) => g.id === b.gast_id);\r\n    const bookingData: BookingData = {\r\n      id: b.id,\r\n      zimmer_id: b.zimmer_id,\r\n      guestName: guest ? `${guest.vorname} ${guest.nachname}` : 'Unbekannt',\r\n      personCount: b.anzahl_personen,\r\n      checkIn: b.check_in,\r\n      checkOut: b.check_out,\r\n      status: b.status,\r\n      anzahlung: b.anzahlung,\r\n      verpflegung: b.verpflegung || '',\r\n      preisProPerson: b.preis_pro_person,\r\n      hund: b.hund || false,\r\n      zusatz_preis: b.zusatz_preis,\r\n      tel_email: b.tel_email,\r\n      notiz: b.notiz || '',\r\n      zimmerNumber: zimmer.find((z) => z.id === b.zimmer_id)?.nummer || '',\r\n    };\r\n    setSelectedBooking(bookingData);\r\n    setBookingEditModalVisible(true);\r\n  }, [gaeste, zimmer]);\r\n\r\n  const handleBookingSubmit = useCallback(\r\n    async (data: {\r\n      guestName: string;\r\n      personCount: number;\r\n      status: string;\r\n      anzahlung: number;\r\n      verpflegung: string;\r\n      preisProPerson: number | null;\r\n      hund: boolean;\r\n      zusatzPreis: string;\r\n      notiz: string;\r\n      tel_email: string;\r\n    }) => {\r\n      if (!selectedCheckIn || !selectedCheckOut || selectedzimmerId === null) {\r\n        Alert.alert('Fehler', 'Bitte Check‑In, Check‑Out und Zimmer auswählen.');\r\n        return;\r\n      }\r\n      const checkInDate = selectedCheckIn.date.toISOString().split('T')[0];\r\n      const checkOutDate = selectedCheckOut.date.toISOString().split('T')[0];\r\n      const nameParts = data.guestName.trim().split(' ');\r\n      if (nameParts.length < 2) {\r\n        Alert.alert('Fehler', 'Bitte Vor‑ und Nachname eingeben.');\r\n        return;\r\n      }\r\n      let guestId: number | null = null;\r\n      const { data: existingGuest } = await supabase\r\n        .from('gaeste')\r\n        .select('id')\r\n        .eq('vorname', nameParts[0])\r\n        .eq('nachname', nameParts[1]);\r\n      if (existingGuest && existingGuest.length > 0) {\r\n        guestId = existingGuest[0].id;\r\n      } else {\r\n        const { data: newGuest, error: guestError } = await supabase\r\n          .from('gaeste')\r\n          .insert([{ vorname: nameParts[0], nachname: nameParts[1] }])\r\n          .select('*')\r\n          .single();\r\n        if (guestError || !newGuest) {\r\n          Alert.alert('Fehler', 'Gast konnte nicht erstellt werden.');\r\n          return;\r\n        }\r\n        guestId = newGuest.id;\r\n      }\r\n      const { error } = await supabase.from('buchungen').insert([\r\n        {\r\n          zimmer_id: selectedzimmerId,\r\n          gast_id: guestId,\r\n          check_in: checkInDate,\r\n          check_out: checkOutDate,\r\n          anzahl_personen: data.personCount,\r\n          preis_pro_person: data.preisProPerson ?? 0,\r\n          anzahlung: data.anzahlung,\r\n          status: data.status,\r\n          verpflegung: data.verpflegung,\r\n          hund: data.hund,\r\n          zusatz_preis: data.zusatzPreis,\r\n          tel_email: data.tel_email,\r\n          notiz: data.notiz,\r\n        },\r\n      ]);\r\n      if (error) {\r\n        Alert.alert('Fehler', error.message);\r\n      } else {\r\n        Alert.alert('Erfolg', 'Buchung erstellt!');\r\n        setSelectedzimmerId(null);\r\n        setSelectedCheckIn(null);\r\n        setSelectedCheckOut(null);\r\n        setTimeout(() => {\r\n          onRefresh();\r\n          fetchData();\r\n        }, 4000); // 500 Millisekunden Verzögerung\r\n      }\r\n    },\r\n    [selectedCheckIn, selectedCheckOut, selectedzimmerId, onRefresh, fetchData]\r\n  );\r\n\r\n  const handleBookingUpdate = useCallback(\r\n    async (updatedBooking: BookingData) => {\r\n      await onRefresh();\r\n      await fetchData();\r\n      setBookingEditModalVisible(false);\r\n      setSelectedBooking(null);\r\n    },\r\n    [onRefresh, fetchData]\r\n  );\r\n\r\n  const handleBookingDelete = useCallback(\r\n    async (bookingId: number) => {\r\n      await onRefresh();\r\n      await fetchData();\r\n      setBookingEditModalVisible(false);\r\n      setSelectedBooking(null);\r\n    },\r\n    [onRefresh, fetchData]\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Header – nur einmal, mit Titel */}\r\n      <Header title=\"Zimmer-Kalender\" />\r\n\r\n      {/* Kombinierter Steuerbereich */}\r\n      <View style={styles.controlsContainer}>\r\n        <Button title=\"-3 Monate\" onPress={addBackwardExtension} />\r\n        <Text style={styles.monthYearText}>\r\n          {displayedDate.toLocaleDateString('de-DE', { month: 'long', year: 'numeric' })}\r\n        </Text>\r\n        <Button title=\"+3 Monate\" onPress={addForwardExtension} />\r\n      </View>\r\n\r\n      {/* Monatsbuttons */}\r\n      <View style={styles.monthButtonsContainer}>\r\n        {monthAbbreviations.map((abbr, index) => (\r\n          <TouchableOpacity\r\n            key={index}\r\n            style={styles.monthButton}\r\n            onPress={() => handleMonthButtonPress(index)}\r\n          >\r\n            <Text style={styles.monthButtonText}>\r\n              {isSmallScreen ? abbr.substring(0, 2) : abbr}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        ))}\r\n      </View>\r\n\r\n      {/* Kalender */}\r\n      <View style={styles.tableContainer}>\r\n        {/* Fixe Spalte: Zimmer */}\r\n        <View style={styles.fixedColumn}>\r\n          <View style={[styles.headerCell, styles.leftHeaderCell]}>\r\n            <Text style={styles.headerCellText}>Zimmer</Text>\r\n          </View>\r\n          {zimmer.map((room) => (\r\n            <View key={room.id} style={styles.zimmerCell}>\r\n              <Text style={styles.zimmerText}>Z. {room.nummer}</Text>\r\n            </View>\r\n          ))}\r\n        </View>\r\n\r\n        {/* Horizontal scrollbarer Kalender */}\r\n        <ScrollView\r\n          horizontal\r\n          style={styles.horizontalScroll}\r\n          ref={scrollViewRef}\r\n          onScroll={handleScroll}\r\n          scrollEventThrottle={16}\r\n        >\r\n          <View>\r\n            {/* Tages-Header: Zwei Zeilen */}\r\n            <View style={styles.headerRow}>\r\n              {daysArray.map((day) => {\r\n                const isToday = isSameDay(day.date, new Date());\r\n                const weekday = day.date.toLocaleDateString('de-DE', { weekday: 'short' });\r\n                const weekend = weekday.startsWith('Sa') || weekday.startsWith('So');\r\n                return (\r\n                  <View\r\n                    key={day.date.toISOString()}\r\n                    style={[\r\n                      styles.headerCell,\r\n                      { width: DAY_WIDTH },\r\n                      isToday && styles.todayHeader,\r\n                      weekend && styles.weekendHeader,\r\n                    ]}\r\n                  >\r\n                    <Text style={styles.headerSmallText}>{weekday} {day.monthYear}</Text>\r\n                    <Text style={styles.headerDayNumber}>{day.dayNumber}</Text>\r\n                  </View>\r\n                );\r\n              })}\r\n            </View>\r\n\r\n            {/* Raumzeilen */}\r\n            {zimmer.map((room) => (\r\n              <View key={room.id} style={{ position: 'relative', height: ROW_HEIGHT }}>\r\n                <View style={styles.zimmerRow}>\r\n                  {daysArray.map((day) => {\r\n                    const isSelected =\r\n                      selectedzimmerId === room.id &&\r\n                      ((selectedCheckIn && isSameDay(day.date, selectedCheckIn.date)) ||\r\n                        (selectedCheckOut && isSameDay(day.date, selectedCheckOut.date)));\r\n                    const existingBooking = getBuchungForDay(day, room.id, localBuchungen);\r\n                    return (\r\n                      <DayCell\r\n                        key={day.date.toISOString()}\r\n                        day={day}\r\n                        isSelected={isSelected}\r\n                        existingBooking={existingBooking}\r\n                        onPress={() => {\r\n                          if (!selectedCheckIn) {\r\n                            if (!existingBooking) handleDayPress(day, room.id);\r\n                          } else {\r\n                            handleDayPress(day, room.id);\r\n                          }\r\n                        }}\r\n                      />\r\n                    );\r\n                  })}\r\n                </View>\r\n                {/* Buchungsblöcke */}\r\n                <BookingBlockRow\r\n                  zimmer={room}\r\n                  bookings={localBuchungen.filter((b) => b.zimmer_id === room.id)}\r\n                  daysArray={daysArray}\r\n                  gaeste={gaeste}\r\n                  onPressBooking={handleBookingPress}\r\n                  highlightedBookingId={highlightedBookingId}\r\n                />\r\n              </View>\r\n            ))}\r\n          </View>\r\n        </ScrollView>\r\n      </View>\r\n\r\n      {/* Suchbereich */}\r\n      <View style={styles.searchContainer}>\r\n        <TextInput\r\n          style={styles.searchInput}\r\n          placeholder=\"Nach Gastname suchen...\"\r\n          value={searchQuery}\r\n          onChangeText={setSearchQuery}\r\n        />\r\n        <Button title=\"Suchen\" onPress={handleSearch} />\r\n      </View>\r\n\r\n      {selectedCheckIn && selectedCheckOut && !isSameDay(selectedCheckIn.date, selectedCheckOut.date) && (\r\n        <TouchableOpacity style={styles.bookingButton} onPress={openBookingModal}>\r\n          <Text style={styles.bookingButtonText}>Buchungsformular öffnen</Text>\r\n        </TouchableOpacity>\r\n      )}\r\n\r\n      <BookingFormModal\r\n        isVisible={isBookingModalVisible}\r\n        checkIn={selectedCheckIn ? selectedCheckIn.date.toISOString().split('T')[0] : ''}\r\n        checkOut={selectedCheckOut ? selectedCheckOut.date.toISOString().split('T')[0] : ''}\r\n        onClose={() => setBookingModalVisible(false)}\r\n        onSubmit={handleBookingSubmit}\r\n        initialGuestName={guestInput}\r\n        initialPersonCount={personCountInput ? parseInt(personCountInput) : 0}\r\n        onRefresh={onRefresh}\r\n        selectedzimmerId={selectedzimmerId || undefined}\r\n      />\r\n\r\n      {selectedBooking && (\r\n        <BookingEditModal\r\n          isVisible={isBookingEditModalVisible}\r\n          booking={selectedBooking}\r\n          onClose={() => {\r\n            setBookingEditModalVisible(false);\r\n            setSelectedBooking(null);\r\n          }}\r\n          onUpdate={handleBookingUpdate}\r\n          onDelete={handleBookingDelete}\r\n          onRefresh={onRefresh}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\n// --- STYLES ---\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingTop: 40,\r\n  },\r\n  containerLandscape: {\r\n    paddingBottom: 20,\r\n  },\r\n  controlsContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    height: 40,\r\n    paddingHorizontal: 16,\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  monthYearText: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n  },\r\n  monthButtonsContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginVertical: 8,\r\n    paddingHorizontal: 16,\r\n    backgroundColor: '#eee',\r\n  },\r\n  monthButton: {\r\n    paddingVertical: 6,\r\n    paddingHorizontal: 10,\r\n    borderRadius: 4,\r\n    backgroundColor: '#ddd',\r\n  },\r\n  monthButtonText: {\r\n    fontSize: 12,\r\n    fontWeight: '500',\r\n  },\r\n  tableContainer: {\r\n    flex: 1,\r\n    position: 'relative',\r\n  },\r\n  fixedColumn: {\r\n    width: 80,\r\n    position: 'absolute',\r\n    left: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    zIndex: 1,\r\n  },\r\n  horizontalScroll: {\r\n    flex: 1,\r\n    marginLeft: 80,\r\n  },\r\n  headerRow: {\r\n    flexDirection: 'row',\r\n    borderBottomWidth: 1,\r\n    borderColor: '#ccc',\r\n  },\r\n  headerCell: {\r\n    backgroundColor: '#eee',\r\n    borderRightWidth: 1,\r\n    borderBottomWidth: 1,\r\n    borderColor: '#ccc',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: 35,\r\n  },\r\n  headerSmallText: {\r\n    fontSize: 10,\r\n    color: '#555',\r\n  },\r\n  headerDayNumber: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n    color: '#333',\r\n  },\r\n  headerCellText: {\r\n    fontSize: 12,\r\n    fontWeight: 'bold',\r\n  },\r\n  leftHeaderCell: {\r\n    borderBottomWidth: 1,\r\n    borderColor: '#ccc',\r\n  },\r\n  todayHeader: {\r\n    backgroundColor: '#b3e6ff',\r\n  },\r\n  weekendHeader: {\r\n    backgroundColor: '#cccccc',\r\n  },\r\n  zimmerRow: {\r\n    flexDirection: 'row',\r\n  },\r\n  zimmerCell: {\r\n    backgroundColor: '#fafafa',\r\n    borderBottomWidth: 1,\r\n    borderColor: '#ccc',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: 35,\r\n    width: 80,\r\n  },\r\n  zimmerText: {\r\n    fontSize: 12,\r\n    fontWeight: 'bold',\r\n  },\r\n  dayCell: {\r\n    borderRightWidth: 1,\r\n    borderBottomWidth: 1,\r\n    borderColor: '#ccc',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  selectedDayCell: {\r\n    backgroundColor: '#d0f0ff',\r\n  },\r\n  dayCellText: {\r\n    fontSize: 10,\r\n    color: '#333',\r\n  },\r\n  overlayContainer: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    pointerEvents: 'box-none',\r\n  },\r\n  bookingBlock: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    height: 35,\r\n    borderWidth: 1,\r\n    borderColor: '#99cc99',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 2,\r\n  },\r\n  bookingBlockText: {\r\n    fontSize: 9,\r\n    fontWeight: '600',\r\n    color: '#333',\r\n    textAlign: 'center',\r\n    flexWrap: 'wrap',\r\n  },\r\n  bookingButton: {\r\n    backgroundColor: '#007AFF',\r\n    padding: 12,\r\n    margin: 16,\r\n    borderRadius: 6,\r\n    alignItems: 'center',\r\n  },\r\n  bookingButtonText: {\r\n    color: '#fff',\r\n    fontSize: 16,\r\n  },\r\n  searchContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 8,\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    padding: 8,\r\n    borderRadius: 4,\r\n    marginRight: 8,\r\n  },\r\n});\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Alert,\r\n} from 'react-native';\r\nimport { supabase } from '../supabaseClient';\r\nimport Header from '../components/Header';\r\n\r\ntype Buchung = {\r\n  id: number;\r\n  zimmer_id: number;\r\n  gast_id: number | null;\r\n  check_in: string;\r\n  check_out: string;\r\n  anzahlung: number;\r\n  status: string;\r\n};\r\n\r\ntype Gast = {\r\n  id: number;\r\n  vorname: string;\r\n  nachname: string;\r\n};\r\n\r\ntype AnzahlungenScreenProps = {\r\n  onRefresh?: () => void;\r\n};\r\n\r\nconst AnzahlungenScreen: React.FC<AnzahlungenScreenProps> = ({ onRefresh }) => {\r\n  const [buchungen, setBuchungen] = useState<Buchung[]>([]);\r\n  const [gaeste, setGaeste] = useState<Gast[]>([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n\r\n      const { data: buchungenData, error: buchungenError } = await supabase\r\n        .from('buchungen')\r\n        .select('*')\r\n        .or('status.eq.anzahlung,status.eq.anzahlung_bezahlt')\r\n        .gte('check_in', today)\r\n        .order('check_in', { ascending: true });\r\n\r\n      if (buchungenError) throw buchungenError;\r\n      if (buchungenData) setBuchungen(buchungenData);\r\n\r\n      const { data: gaesteData, error: gaesteError } = await supabase\r\n        .from('gaeste')\r\n        .select('*');\r\n\r\n      if (gaesteError) throw gaesteError;\r\n      if (gaesteData) setGaeste(gaesteData);\r\n    } catch (error) {\r\n      console.error('Fehler beim Laden der Daten:', error);\r\n      Alert.alert('Fehler', 'Daten konnten nicht geladen werden.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n\r\n    // Alle 2 Minuten Daten abrufen\r\n    const interval = setInterval(fetchData, 120000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Optionale externe onRefresh-Aktion (falls übergeben)\r\n  useEffect(() => {\r\n    if (onRefresh) {\r\n      onRefresh();\r\n    }\r\n  }, [onRefresh]);\r\n\r\n  const updateStatus = async (buchungId: number, neuerStatus: 'anzahlung' | 'anzahlung_bezahlt') => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('buchungen')\r\n        .update({ status: neuerStatus })\r\n        .eq('id', buchungId);\r\n\r\n      if (error) throw error;\r\n\r\n      Alert.alert('Erfolg', 'Status erfolgreich geändert.');\r\n      // Nach Statusänderung Daten neu laden\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Fehler beim Aktualisieren des Status:', error);\r\n      Alert.alert('Fehler', 'Status konnte nicht geändert werden.');\r\n    }\r\n  };\r\n\r\n  const filteredBuchungen = searchQuery\r\n    ? buchungen.filter(b => {\r\n        const gast = gaeste.find(g => g.id === b.gast_id);\r\n        if (!gast) return false;\r\n        const fullName = `${gast.vorname} ${gast.nachname}`.toLowerCase();\r\n        return fullName.includes(searchQuery.toLowerCase());\r\n      })\r\n    : buchungen;\r\n\r\n  const offeneAnzahlungenSumme = filteredBuchungen\r\n    .filter(b => b.status === 'anzahlung' && new Date(b.check_in) > new Date())\r\n    .reduce((sum, b) => sum + b.anzahlung, 0);\r\n\r\n  const bezahlteAnzahlungenSumme = filteredBuchungen\r\n    .filter(b => b.status === 'anzahlung_bezahlt' && new Date(b.check_out) > new Date())\r\n    .reduce((sum, b) => sum + b.anzahlung, 0);\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <Header />\r\n      <Text style={styles.title}>Anzahlungen</Text>\r\n\r\n      <TextInput\r\n        style={styles.searchInput}\r\n        placeholder=\"Gäste suchen...\"\r\n        value={searchQuery}\r\n        onChangeText={setSearchQuery}\r\n      />\r\n\r\n      <Text style={styles.sectionTitle}>\r\n        Offene Anzahlungen ({offeneAnzahlungenSumme} €)\r\n      </Text>\r\n      {filteredBuchungen\r\n        .filter(b => b.status === 'anzahlung')\r\n        .map(b => {\r\n          const gast = gaeste.find(g => g.id === b.gast_id);\r\n          return (\r\n            <View key={b.id} style={styles.card}>\r\n              <Text>\r\n                <Text style={styles.boldText}>\r\n                  {gast ? `${gast.vorname} ${gast.nachname}` : 'Unbekannter Gast'}\r\n                </Text>\r\n                {' - '}\r\n                {b.check_in} bis {b.check_out}\r\n              </Text>\r\n              <Text>Anzahlung: {b.anzahlung} €</Text>\r\n\r\n              <View style={styles.radioGroup}>\r\n                <TouchableOpacity\r\n                  style={[\r\n                    styles.radioButton,\r\n                    b.status === 'anzahlung' && styles.radioButtonRed,\r\n                  ]}\r\n                  onPress={() => updateStatus(b.id, 'anzahlung')}\r\n                >\r\n                  <Text style={styles.radioText}>Nicht bezahlt</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity\r\n                  style={[\r\n                    styles.radioButton,\r\n                    b.status === 'anzahlung_bezahlt' && styles.radioButtonGreen,\r\n                  ]}\r\n                  onPress={() => updateStatus(b.id, 'anzahlung_bezahlt')}\r\n                >\r\n                  <Text style={styles.radioText}>Bezahlt</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            </View>\r\n          );\r\n        })}\r\n\r\n      <Text style={styles.sectionTitle}>\r\n        Bezahlte Anzahlungen ({bezahlteAnzahlungenSumme} €)\r\n      </Text>\r\n      {filteredBuchungen\r\n        .filter(b => b.status === 'anzahlung_bezahlt')\r\n        .map(b => {\r\n          const gast = gaeste.find(g => g.id === b.gast_id);\r\n          return (\r\n            <View key={b.id} style={styles.card}>\r\n              <Text>\r\n                <Text style={styles.boldText}>\r\n                  {gast ? `${gast.vorname} ${gast.nachname}` : 'Unbekannter Gast'}\r\n                </Text>\r\n                {' - '}\r\n                {b.check_in} bis {b.check_out}\r\n              </Text>\r\n              <Text>Anzahlung: {b.anzahlung} €</Text>\r\n\r\n              <View style={styles.radioGroup}>\r\n                <TouchableOpacity\r\n                  style={[\r\n                    styles.radioButton,\r\n                    b.status === 'anzahlung' && styles.radioButtonRed,\r\n                  ]}\r\n                  onPress={() => updateStatus(b.id, 'anzahlung')}\r\n                >\r\n                  <Text style={styles.radioText}>Nicht bezahlt</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity\r\n                  style={[\r\n                    styles.radioButton,\r\n                    b.status === 'anzahlung_bezahlt' && styles.radioButtonGreen,\r\n                  ]}\r\n                  onPress={() => updateStatus(b.id, 'anzahlung_bezahlt')}\r\n                >\r\n                  <Text style={styles.radioText}>Bezahlt</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            </View>\r\n          );\r\n        })}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, padding: 16, backgroundColor: '#fff' },\r\n  title: { fontSize: 24, fontWeight: 'bold', textAlign: 'center', marginBottom: 16 },\r\n  searchInput: { borderWidth: 1, borderColor: '#ccc', padding: 8, marginBottom: 16, borderRadius: 4 },\r\n  sectionTitle: { fontSize: 20, fontWeight: 'bold', marginTop: 16, marginBottom: 8 },\r\n  card: { backgroundColor: '#f9f9f9', padding: 12, borderRadius: 6, marginBottom: 12 },\r\n  boldText: { fontWeight: 'bold' },\r\n  radioGroup: { flexDirection: 'row', marginTop: 8 },\r\n  radioButton: {\r\n    padding: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    backgroundColor: '#f0f0f0',\r\n    borderRadius: 4,\r\n    marginRight: 8,\r\n  },\r\n  radioButtonRed: { backgroundColor: '#FF5733', borderColor: '#FF5733' },\r\n  radioButtonGreen: { backgroundColor: '#4CAF50', borderColor: '#4CAF50' },\r\n  radioText: { fontSize: 16, color: '#000' },\r\n});\r\n\r\nexport default AnzahlungenScreen;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { View, Text, TextInput, Button, Alert, StyleSheet, FlatList, Modal } from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { supabase } from '../supabaseClient';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nconst EinstellungenScreen = () => {\r\n  const [ferienStart, setFerienStart] = useState('');\r\n  const [ferienEnde, setFerienEnde] = useState('');\r\n  const [ferienListe, setFerienListe] = useState([]);\r\n  const [editModalVisible, setEditModalVisible] = useState(false);\r\n  const [currentEdit, setCurrentEdit] = useState(null); // {check_in, check_out}\r\n  const [newStart, setNewStart] = useState('');\r\n  const [newEnd, setNewEnd] = useState('');\r\n  const navigation = useNavigation();\r\n\r\n  // Ferien aus Supabase abrufen: Nur Ferien, deren check_out-Datum nach heute liegt\r\n  const fetchFerien = async () => {\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const { data, error } = await supabase\r\n        .from('buchungen')\r\n        .select('check_in, check_out')\r\n        .eq('status', 'Ferien')\r\n        .gt('check_out', today);\r\n      if (error) throw error;\r\n      if (data) {\r\n        // Gruppieren, damit gleiche Zeiträume nur einmal angezeigt werden\r\n        const grouped = {};\r\n        data.forEach(item => {\r\n          const key = `${item.check_in}_${item.check_out}`;\r\n          grouped[key] = { check_in: item.check_in, check_out: item.check_out };\r\n        });\r\n        setFerienListe(Object.values(grouped));\r\n      }\r\n    } catch (error: any) {\r\n      Alert.alert('Fehler', error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchFerien();\r\n  }, []);\r\n\r\n  // Ferien eintragen\r\n  const handleFerienEintragen = async () => {\r\n    if (!ferienStart || !ferienEnde) {\r\n      Alert.alert('Fehler', 'Bitte Start- und Enddatum angeben.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data: overlappingBookings, error: overlapError } = await supabase\r\n        .from('buchungen')\r\n        .select('zimmer_id')\r\n        .filter('check_in', 'lt', ferienEnde)\r\n        .filter('check_out', 'gt', ferienStart);\r\n\r\n      if (overlapError) throw overlapError;\r\n      if (overlappingBookings && overlappingBookings.length > 0) {\r\n        Alert.alert('Nicht möglich', 'In mindestens einem Zimmer existiert bereits eine Buchung in diesem Zeitraum.');\r\n        return;\r\n      }\r\n\r\n      const { data: zimmerData, error: zimmerError } = await supabase\r\n        .from('zimmer')\r\n        .select('id');\r\n      if (zimmerError) throw zimmerError;\r\n      if (!zimmerData || zimmerData.length === 0) {\r\n        Alert.alert('Fehler', 'Keine Zimmer gefunden.');\r\n        return;\r\n      }\r\n\r\n      const { data: existingFerienGuest } = await supabase\r\n        .from('gaeste')\r\n        .select('id')\r\n        .eq('vorname', 'Ferien')\r\n        .eq('nachname', 'Ferien');\r\n      let ferienGuestId;\r\n      if (existingFerienGuest && existingFerienGuest.length > 0) {\r\n        ferienGuestId = existingFerienGuest[0].id;\r\n      } else {\r\n        const { data: newGuest, error: guestError } = await supabase\r\n          .from('gaeste')\r\n          .insert([{ vorname: 'Ferien', nachname: 'Ferien' }])\r\n          .select('*')\r\n          .single();\r\n        if (guestError) throw guestError;\r\n        ferienGuestId = newGuest.id;\r\n      }\r\n\r\n      const bookings = zimmerData.map((zimmer: { id: number }) => ({\r\n        zimmer_id: zimmer.id,\r\n        gast_id: ferienGuestId,\r\n        check_in: ferienStart,\r\n        check_out: ferienEnde,\r\n        anzahl_personen: 0,\r\n        preis_pro_person: 0,\r\n        anzahlung: 0,\r\n        status: 'Ferien',\r\n        verpflegung: '',\r\n        hund: false,\r\n        zusatz_preis: '',\r\n        tel_email: '',\r\n        notiz: 'Ferienbuchung',\r\n      }));\r\n\r\n      const { error: insertError } = await supabase\r\n        .from('buchungen')\r\n        .insert(bookings);\r\n      if (insertError) throw insertError;\r\n\r\n      Alert.alert('Erfolg', 'Ferien erstellt.');\r\n      setFerienStart('');\r\n      setFerienEnde('');\r\n      fetchFerien();\r\n    } catch (error: any) {\r\n      console.error(error);\r\n      Alert.alert('Fehler', error.message);\r\n    }\r\n  };\r\n\r\n  // Ferien löschen\r\n  const handleFerienLöschen = async (check_in: string, check_out: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('buchungen')\r\n        .delete()\r\n        .eq('status', 'Ferien')\r\n        .eq('check_in', check_in)\r\n        .eq('check_out', check_out);\r\n      if (error) throw error;\r\n      Alert.alert('Erfolg', 'Ferien gelöscht.');\r\n      fetchFerien();\r\n    } catch (error: any) {\r\n      Alert.alert('Fehler', error.message);\r\n    }\r\n  };\r\n\r\n  // Ferien bearbeiten (verlängern/verkürzen)\r\n  const handleFerienBearbeiten = async () => {\r\n    if (!newStart || !newEnd || !currentEdit) {\r\n      Alert.alert('Fehler', 'Bitte neue Start- und Enddaten angeben.');\r\n      return;\r\n    }\r\n    try {\r\n      const { error } = await supabase\r\n        .from('buchungen')\r\n        .update({ check_in: newStart, check_out: newEnd })\r\n        .eq('status', 'Ferien')\r\n        .eq('check_in', currentEdit.check_in)\r\n        .eq('check_out', currentEdit.check_out);\r\n      if (error) throw error;\r\n      Alert.alert('Erfolg', 'Ferien aktualisiert.');\r\n      setEditModalVisible(false);\r\n      setCurrentEdit(null);\r\n      fetchFerien();\r\n    } catch (error: any) {\r\n      Alert.alert('Fehler', error.message);\r\n    }\r\n  };\r\n\r\n  // Logout\r\n  const handleLogout = async () => {\r\n    try {\r\n      await supabase.auth.signOut();\r\n      await AsyncStorage.clear();\r\n      navigation.reset({ index: 0, routes: [{ name: 'Login' }] });\r\n    } catch (error: any) {\r\n      Alert.alert('Fehler', error.message || 'Logout fehlgeschlagen.');\r\n    }\r\n  };\r\n\r\n  const renderFerienItem = ({ item }) => (\r\n    <View style={styles.ferienItem}>\r\n      <Text>{item.check_in} bis {item.check_out}</Text>\r\n      <View style={styles.ferienButtons}>\r\n        <Button title=\"Bearbeiten\" onPress={() => {\r\n          setCurrentEdit(item);\r\n          setNewStart(item.check_in);\r\n          setNewEnd(item.check_out);\r\n          setEditModalVisible(true);\r\n        }} />\r\n        <Button title=\"Löschen\" onPress={() => handleFerienLöschen(item.check_in, item.check_out)} color=\"red\" />\r\n      </View>\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Einstellungen</Text>\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Ferien eintragen</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Startdatum (YYYY-MM-DD)\"\r\n          value={ferienStart}\r\n          onChangeText={setFerienStart}\r\n        />\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Enddatum (YYYY-MM-DD)\"\r\n          value={ferienEnde}\r\n          onChangeText={setFerienEnde}\r\n        />\r\n        <Button title=\"Ferien eintragen\" onPress={handleFerienEintragen} />\r\n      </View>\r\n\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Bevorstehende Ferien</Text>\r\n        <FlatList\r\n          data={ferienListe}\r\n          keyExtractor={(item) => item.check_in + '_' + item.check_out}\r\n          renderItem={renderFerienItem}\r\n          ListEmptyComponent={<Text>Keine Ferien eingetragen.</Text>}\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Logout</Text>\r\n        <Button title=\"Logout\" onPress={handleLogout} color=\"red\" />\r\n      </View>\r\n\r\n      <Modal\r\n        visible={editModalVisible}\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        onRequestClose={() => setEditModalVisible(false)}\r\n      >\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalContent}>\r\n            <Text>Ferien bearbeiten</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Neues Startdatum (YYYY-MM-DD)\"\r\n              value={newStart}\r\n              onChangeText={setNewStart}\r\n            />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Neues Enddatum (YYYY-MM-DD)\"\r\n              value={newEnd}\r\n              onChangeText={setNewEnd}\r\n            />\r\n            <Button title=\"Speichern\" onPress={handleFerienBearbeiten} />\r\n            <Button title=\"Abbrechen\" onPress={() => setEditModalVisible(false)} color=\"red\" />\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, padding: 20, justifyContent: 'center' },\r\n  title: { fontSize: 24, fontWeight: 'bold', textAlign: 'center', marginBottom: 24 },\r\n  section: { marginBottom: 40 },\r\n  sectionTitle: { fontSize: 18, fontWeight: 'bold', marginBottom: 12 },\r\n  input: {\r\n    height: 40,\r\n    borderColor: '#ccc',\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    paddingHorizontal: 10,\r\n    marginBottom: 12,\r\n  },\r\n  ferienItem: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: 8 },\r\n  ferienButtons: { flexDirection: 'row' },\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0,0,0,0.5)'\r\n  },\r\n  modalContent: {\r\n    backgroundColor: 'white',\r\n    padding: 20,\r\n    borderRadius: 10,\r\n    width: '80%'\r\n  }\r\n});\r\n\r\nexport default EinstellungenScreen;\r\n","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { NavigationContainer } from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport NetInfo from '@react-native-community/netinfo';\r\n\r\nimport LoginScreen from './src/screens/LoginScreen';\r\nimport HomeScreen from './src/screens/HomeScreen';\r\nimport CalendarScreen from './src/screens/CalendarScreen';\r\nimport AnzahlungenScreen from './src/screens/AnzahlungenScreen';\r\nimport EinstellungenScreen from './src/screens/EinstellungenScreen';\r\nimport { supabase } from './src/supabaseClient';\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nexport default function App() {\r\n  const [buchungen, setBuchungen] = useState<any[]>([]);\r\n  const [isConnected, setIsConnected] = useState(true);\r\n\r\n  // Vollständiges Laden der Buchungen (ohne Soft‑Delete)\r\n  const syncFullBuchungen = useCallback(async () => {\r\n    if (!isConnected) return;\r\n    try {\r\n      console.log(\"🔄 Vollständiges Laden der Buchungen...\");\r\n      const { data, error } = await supabase\r\n        .from('buchungen')\r\n        .select('*')\r\n        .is('deleted_at', null);\r\n      if (error) {\r\n        console.error(\"❌ Fehler beim Voll-Laden der Buchungen:\", error);\r\n        return;\r\n      }\r\n      console.log(\"📥 Vollständig geladene Buchungen:\", data);\r\n      if (data) {\r\n        setBuchungen(data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"⚠️ Fehler in syncFullBuchungen:\", error);\r\n    }\r\n  }, [isConnected]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = NetInfo.addEventListener(state => {\r\n      setIsConnected(state.isConnected);\r\n    });\r\n\r\n    // Initialer Datenabruf\r\n    syncFullBuchungen();\r\n\r\n    // Alle 2 Minuten alle Buchungen neu laden\r\n    const fullInterval = setInterval(syncFullBuchungen, 120000);\r\n\r\n    return () => {\r\n      clearInterval(fullInterval);\r\n      unsubscribe();\r\n    };\r\n  }, [syncFullBuchungen]);\r\n\r\n  console.log(\"📊 Buchungen in App.tsx:\", buchungen);\r\n\r\n  return (\r\n    <NavigationContainer>\r\n      <Stack.Navigator initialRouteName=\"Login\">\r\n        <Stack.Screen name=\"Login\" component={LoginScreen} />\r\n        <Stack.Screen name=\"Home\" component={HomeScreen} />\r\n        <Stack.Screen \r\n          name=\"Calendarscreen\" \r\n          children={() => <CalendarScreen buchungen={buchungen} onRefresh={syncFullBuchungen} />} \r\n        />\r\n        <Stack.Screen \r\n          name=\"AnzahlungenScreen\" \r\n          children={() => <AnzahlungenScreen onRefresh={syncFullBuchungen} />} \r\n        />\r\n        <Stack.Screen name=\"EinstellungenScreen\" component={EinstellungenScreen} />\r\n      </Stack.Navigator>\r\n    </NavigationContainer>\r\n  );\r\n}\r\n","import { registerRootComponent } from 'expo';\r\n\r\nimport App from './App';\r\n\r\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\r\n// It also ensures that whether you load the app in Expo Go or in a native build,\r\n// the environment is set up appropriately\r\nregisterRootComponent(App);\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"783bc47a\" + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/Oberraut/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [624], () => (__webpack_require__(211)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["supabase","createClient","styles","StyleSheet","create","header","height","flexDirection","alignItems","backgroundColor","borderBottomWidth","borderBottomColor","paddingHorizontal","sideContainer","flex","centerContainer","logo","width","resizeMode","logoBetrieb","title","fontSize","fontWeight","Header","_jsxs","View","style","children","_jsx","Image","source","require","Text","LoginScreen","navigation","useNavigation","email","setEmail","useState","password","setPassword","errorMsg","setErrorMsg","loading","setLoading","useEffect","async","lastLogin","AsyncStorage","getItem","data","session","auth","getSession","lastLoginTime","Date","parseInt","now","getTime","replace","error","console","checkLoginStatus","loadingContainer","ActivityIndicator","size","color","container","TextInput","input","placeholder","autoCapitalize","keyboardType","value","onChangeText","secureTextEntry","Button","onPress","signInWithPassword","user","message","setItem","toString","err","disabled","padding","justifyContent","marginBottom","textAlign","borderWidth","borderColor","paddingVertical","borderRadius","isSameDay","d1","d2","getFullYear","getMonth","getDate","findDayIndex","date","days","findIndex","d","renderRoomStatus","room","selectedDate","buchungen","gaeste","currentBookings","filter","b","zimmer_id","id","checkIn","check_in","checkOut","check_out","length","statusBar","statusBarText","statusBarsContainer","map","checkInDate","checkOutDate","guest","find","g","gast_id","guestLastName","nachname","verpflegungAbbr","verpflegung","statusLabel","anzahl_personen","dateSelector","dateText","navigationButtons","roomList","flexWrap","roomCard","roomTitle","statusText","marginVertical","guestName","textDecorationLine","summary","summaryBorder","borderTopWidth","summaryText","customModalContainer","margin","customModalOverlay","customModalContent","modalTitle","navFooter","marginTop","HomeScreen","daysArray","setDaysArray","zimmer","setZimmer","setBuchungen","setGaeste","setSelectedDate","searchQuery","setSearchQuery","detailModalVisible","setDetailModalVisible","selectedDetailBooking","setSelectedDetailBooking","scrollViewRef","useRef","fetchData","zimmerData","from","select","buchungenData","gaesteData","result","startDate","setDate","endDate","setMonth","current","dayNumber","padStart","monthYear","toLocaleDateString","month","year","push","generateExtendedDaysArray","interval","setInterval","clearInterval","indexOfToday","offsetX","scrollTo","x","animated","changeDate","offset","newDate","openBookingDetails","goToCalendar","navigate","goToAnzahlungen","goToSettings","ScrollView","nummer","reduce","sum","idx","roomNum","z","TouchableOpacity","vorname","Modal","isVisible","onBackdropPress","useNativeDriver","status","anzahlung","preis_pro_person","zusatz_preis","tel_email","notiz","myAlert","msg","window","alert","RadioGroup","memo","options","selectedValue","onChange","radioGroup","opt","isSelected","TouchableWithoutFeedback","radioOption","radioOptionSelected","radioLabel","radioLabelSelected","label","statusOptions","verpflegungOptions","hundOptions","modalContainer","scrollContainer","flexGrow","modalOverlay","modalContent","alignSelf","marginRight","buttonRow","BookingFormModal","onClose","onSubmit","onRefresh","initialGuestName","initialPersonCount","selectedRoomId","setGuestName","personCount","setPersonCount","setStatus","setAnzahlung","setVerpflegung","preisProPerson","setPreisProPerson","hund","setHund","zusatzPreis","setZusatzPreis","telEmail","setTelEmail","setNotiz","isSubmitting","setIsSubmitting","trim","isFormValid","split","isNaN","validateRoomAvailability","useCallback","roomId","newCheckIn","newCheckOut","eq","is","handleCreate","count","parsedAnzahlung","parseFloat","parsedPreisProPerson","parsedZusatzPreis","log","nameParts","guestId","existingGuest","existingGuestError","newGuest","insert","single","content","contentContainerStyle","keyboardShouldPersistTaps","keyboardDismissMode","returnKeyType","onSubmitEditing","Keyboard","dismiss","multiline","coverScreen","propagateSwipe","avoidKeyboard","sharedInputStyle","modalButtons","BookingEditModal","booking","onUpdate","onDelete","zimmerNumber","setzimmerNumber","setCheckIn","setCheckOut","handleUpdate","update","handleDelete","question","Promise","resolve","confirm","myConfirm","deleted_at","toISOString","blurOnSubmit","DAY_WIDTH","screenWidth","Dimensions","get","isSmallScreen","parseDate","dateStr","includes","formatDayCellData","isIntervalAvailableForzimmer","zimmerId","start","end","bookings","bookingStart","bookingEnd","getBuchungForDay","dayData","DayCell","React","day","existingBooking","dayCell","selectedDayCell","dayCellText","BookingBlockRow","props","onPressBooking","highlightedBookingId","overlayContainer","startIndex","endIndex","blockLeft","blockWidth","blockColor","activeOpacity","bookingBlock","left","bookingBlockText","numberOfLines","CalendarScreen1","localBuchungen","setLocalBuchungen","pastDays","setPastDays","futureMonths","setFutureMonths","selectedCheckIn","setSelectedCheckIn","selectedCheckOut","setSelectedCheckOut","selectedzimmerId","setSelectedzimmerId","setHighlightedBookingId","currentSearchIndex","setCurrentSearchIndex","isBookingModalVisible","setBookingModalVisible","isBookingEditModalVisible","setBookingEditModalVisible","selectedBooking","setSelectedBooking","guestInput","setGuestInput","personCountInput","setPersonCountInput","displayedDate","setDisplayedDate","lastRefreshTimeRef","useMemo","generateDaysArray","intervalId","useFocusEffect","handleScroll","event","centerX","nativeEvent","contentOffset","layoutMeasurement","index","Math","floor","scrollToMonth","targetDate","targetIndex","handleMonthButtonPress","monthIndex","currentYear","addBackwardExtension","prev","addForwardExtension","handleDayPress","isAvailable","bookingAtDay","Alert","handleSearch","lowerQuery","toLowerCase","matches","bookingId","matchingBooking","dayIndex","openBookingModal","handleBookingPress","bookingData","handleBookingSubmit","guestError","setTimeout","handleBookingUpdate","handleBookingDelete","controlsContainer","monthYearText","monthButtonsContainer","abbr","monthButton","monthButtonText","substring","tableContainer","fixedColumn","headerCell","leftHeaderCell","headerCellText","zimmerCell","zimmerText","horizontal","horizontalScroll","ref","onScroll","scrollEventThrottle","headerRow","isToday","weekday","weekend","startsWith","todayHeader","weekendHeader","headerSmallText","headerDayNumber","position","zimmerRow","searchContainer","searchInput","bookingButton","bookingButtonText","undefined","paddingTop","containerLandscape","paddingBottom","top","bottom","zIndex","marginLeft","borderRightWidth","right","pointerEvents","sectionTitle","card","boldText","radioButton","radioButtonRed","radioButtonGreen","radioText","AnzahlungenScreen","today","buchungenError","or","gte","order","ascending","gaesteError","updateStatus","buchungId","neuerStatus","filteredBuchungen","gast","offeneAnzahlungenSumme","bezahlteAnzahlungenSumme","section","ferienItem","ferienButtons","EinstellungenScreen","ferienStart","setFerienStart","ferienEnde","setFerienEnde","ferienListe","setFerienListe","editModalVisible","setEditModalVisible","currentEdit","setCurrentEdit","newStart","setNewStart","newEnd","setNewEnd","fetchFerien","gt","grouped","forEach","item","key","Object","values","overlappingBookings","overlapError","zimmerError","existingFerienGuest","ferienGuestId","insertError","FlatList","keyExtractor","renderItem","renderFerienItem","delete","handleFerienLöschen","ListEmptyComponent","signOut","clear","reset","routes","name","visible","animationType","transparent","onRequestClose","Stack","createNativeStackNavigator","registerRootComponent","isConnected","setIsConnected","syncFullBuchungen","unsubscribe","NetInfo","state","fullInterval","NavigationContainer","Navigator","initialRouteName","Screen","component","CalendarScreen","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","splice","r","n","getter","__esModule","a","leafPrototypes","getProto","getPrototypeOf","obj","t","mode","this","then","ns","def","indexOf","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","e","chunkId","all","promises","u","miniCssF","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","url","done","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","type","target","head","appendChild","Symbol","toStringTag","p","installedChunks","installedChunkData","promise","reject","Error","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}